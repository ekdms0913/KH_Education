# 8.26

### Database

- Data : 저장할 수 있도록 가공된 표, 그래프, 이미지 같은 형태로 조직된 정보 

- Information : 데이터를 가공해서 거기서 나오는 의미있는 정보

- Database : 의미있는 데이터의 집합 (표)

- RDBMS (관계형) : 효율적이고 안정적이고 안전한 다중 사용자 데이터 저장소 

  - 대용량의 데이터를 영구적 저장, 관리, 접근

  -> 회사에서는 RDBMS 쓴다. 대기업 = Oracle 필수

  

- NoSQL : SQL을 사용하지 않는 데이터베이스 (하나의 기능 강화)

  - MongoDB : 다루기 편함. 쉬움 

  - redis : 엄청 빠름, 그러나 저장이 안됨
  - Hbase, Hadoop : 매우 큰 데이터(PB 이상)  저장 가능

  -> 요즘에는 모바일 때문에 뜨고있다.



### MySQL 설치 

###### CentOS 

[root@Linux-04 바탕화면]# vim /etc/sysconfig/network-scripts/ifcfg-eth0

```
DEVICE=eth0
TYPE=Ethernet
ONBOOT=yes
NM_CONTROLLED=no
BOOTPROTO=static
IPADDR=100.100.100.10
NETMASK=255.255.255.0
GATEWAY=100.100.100.254
DNS1=168.126.63.1
DNS2=8.8.8.8
```

[root@Linux-04 바탕화면]# yum -y install mysql-server

[root@Linux-04 바탕화면]# rpm -qa | grep mysql

```
mysql-5.1.73-8.el6_8.x86_64
mysql-libs-5.1.73-8.el6_8.x86_64
mysql-server-5.1.73-8.el6_8.x86_64
```

[root@Linux-04 ~]# vim /etc/my.cnf

```
  1 [mysqld]
  2 datadir=/var/lib/mysql
  3 socket=/var/lib/mysql/mysql.sock
  4 user=mysql
  5 # Disabling symbolic-links is recommended to prevent assorted security risks
  6 symbolic-links=0
  7 
  8 init_connect=SET collation_connection=utf8_general_ci
  9 init_connect=SET NAMES utf8
 10 character-set-server=utf8
 11 collation-server=utf8_general_ci
 12 
 13 
 14 [client]
 15 default-character-set=utf8
 16 
 17 [mysqldump]
 18 default-character-set=utf8
 19 
 20 [mysql]
 21 default-character-set=utf8
 22 
 23 [mysqld_safe]
 24 log-error=/var/log/mysqld.log
 25 pid-file=/var/run/mysqld/mysqld.pid

```

[root@Linux-04 ~]# service mysqld restart

### Mysql

[root@Linux-04 mysql]# mysql

```
mysql> show databases
    -> ;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+
3 rows in set (0.00 sec)

mysql> show
    -> databases;  // 위랑 똑같음 끝에 ;를 입력해야 함
+--------------------+
| Database           |
+--------------------+
| information_schema |  // 자동으로 입력되지만 수정, 삭제가 안되는 DB
| mysql              |  // master database라고도 함 계정, 권한 등의 정보가 들어가는 DB
| test               |  // TEST용, 비어있는 DB
+--------------------+  
3 rows in set (0.00 sec)

-> DB는 항상 선택을 해야함
DB안에 table이 있는거임 그래서 어떤 table를 보고싶은지 선택을 해줘야함!

mysql> show tables;
ERROR 1046 (3D000): No database selected   // 어떤 DB table을 볼건지 선택해야함! 아니면 오류남

mysql> use information_schema;  // DB 선택하는 코드 = use
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+---------------------------------------+
| Tables_in_information_schema          |
+---------------------------------------+
| CHARACTER_SETS                        |
| COLLATIONS                            |
| COLLATION_CHARACTER_SET_APPLICABILITY |
| COLUMNS                               |
| COLUMN_PRIVILEGES                     |
| ENGINES                               |
| EVENTS                                |
| FILES                                 |
| GLOBAL_STATUS                         |
| GLOBAL_VARIABLES                      |
| KEY_COLUMN_USAGE                      |
| PARTITIONS                            |
| PLUGINS                               |
| PROCESSLIST                           |
| PROFILING                             |
| REFERENTIAL_CONSTRAINTS               |
| ROUTINES                              |
| SCHEMATA                              |
| SCHEMA_PRIVILEGES                     |
| SESSION_STATUS                        |
| SESSION_VARIABLES                     |
| STATISTICS                            |
| TABLES                                |
| TABLE_CONSTRAINTS                     |
| TABLE_PRIVILEGES                      |
| TRIGGERS                              |
| USER_PRIVILEGES                       |
| VIEWS                                 |
+---------------------------------------+
28 rows in set (0.00 sec)

mysql> use mysql; 
Database changed
mysql> show tables;
+---------------------------+
| Tables_in_mysql           |
+---------------------------+
| columns_priv              |
| db                        |
| event                     |
| func                      |
| general_log               |
| help_category             |
| help_keyword              |
| help_relation             |
| help_topic                |
| host                      |
| ndb_binlog_index          |
| plugin                    |
| proc                      |
| procs_priv                |
| servers                   |
| slow_log                  |
| tables_priv               |
| time_zone                 |
| time_zone_leap_second     |
| time_zone_name            |
| time_zone_transition      |
| time_zone_transition_type |
| user                      |
+---------------------------+
23 rows in set (0.00 sec)

mysql> use test; // 비어있음
Database changed
mysql> show tables;
Empty set (0.00 sec)



```



#### DB Table 만들기_use, create, drop

```
mysql> create database kh_db; //kh_db 만들기 (create)
Query OK, 1 row affected (0.00 sec)

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| kh_db              |
| mysql              |
| test               |
+--------------------+
4 rows in set (0.00 sec)

mysql> drop database kh_db; //kh_db 삭제하기 (drop)
Query OK, 0 rows affected, 2 warnings (0.00 sec)

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+
3 rows in set (0.00 sec)

mysql> create database kh_db; // kh_db  database 다시 만들어주기 (create)
Query OK, 1 row affected (0.00 sec)

mysql> use kh_db; // kh_db 선택 (use)
Database changed

mysql> create table kh_member;
ERROR 1113 (42000): A table must have at least 1 column //DB는 컬럼을 먼저 만들어줘야함

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| kh_db              |
| mysql              |
| test               |
+--------------------+
4 rows in set (0.00 sec)


```



24p

### 데이터 타입

- unsigned tinyint 0 ~ 255
- tinyint -128 ~ 127



### KEY

- 슈퍼키 : 유일성을 만족하는 속성 (Attribute) 또는 속성들의 집합

  전화번호(최소성), 주민번호(최소성), 이름+전화번호, 이름+주민번호, 이름+전화번호+주민번호

- 후보키 : 유일성과 최소성을 만족하는 속성 또는 속성들의 집합

  전화번호, 주민번호

- 기본키 : 후보키 중에 선택 (PK ; 주민번호)

- 대체키 : 기본키가 되지못한 대체키 (전화번호)

ex. 주민번호 = 기본키 가 된다면 전화번호 는 대체키!

- 왜래키 : 다른 릴레이션의 기본키를 참조하는 속성 또는 속성들의 집합



### DB 만들기_kh_member 

```
mysql> use kh_db;
Database changed
mysql> create table kh_member (
    -> no int auto_increment primary key, // no-넘버 int-정수형 auto_increment - 자동 증가 옵션 Primary key 로 설정
    -> name char(20),
    -> id varchar(20) unique, // unique - 겹치면 안되니까
    -> password varchar(30) default "1234", // default 값 설정 가능
    -> reg_date datetime not null // 날짜 no NULL
    -> );
Query OK, 0 rows affected (0.00 sec)

mysql> show tables; //kh_member 생성된거 확인 (show)
+-----------------+
| Tables_in_kh_db |
+-----------------+
| kh_member       |
+-----------------+
1 row in set (0.00 sec)

mysql> desc kh_member; // 컬럼 명 까지 보고싶을 때 (desc)
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| no       | int(11)     | NO   | PRI | NULL    | auto_increment |
| name     | char(20)    | YES  |     | NULL    |                |
| id       | varchar(20) | YES  | UNI | NULL    |                |
| password | varchar(30) | YES  |     | 1234    |                |
| reg_date | datetime    | NO   |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
5 rows in set (0.00 sec)

```

#### 추가 alter add_ first, after

```
mysql> alter table kh_member add //그냥 add 사용시 맨 아래에 추가 됨
    -> nickname varchar(30) unique;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc kh_member; 
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| no       | int(11)     | NO   | PRI | NULL    | auto_increment |
| name     | char(20)    | YES  |     | NULL    |                |
| id       | varchar(20) | YES  | UNI | NULL    |                |
| password | varchar(30) | YES  |     | 1234    |                |
| reg_date | datetime    | NO   |     | NULL    |                |
| nickname | varchar(30) | YES  | UNI | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
6 rows in set (0.00 sec)

mysql> alter table kh_member add age int first; // 뒤에 firt 옵션 쓰면 맨 위에 추가됨
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc kh_member;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| age      | int(11)     | YES  |     | NULL    |                |
| no       | int(11)     | NO   | PRI | NULL    | auto_increment |
| name     | char(20)    | YES  |     | NULL    |                |
| id       | varchar(20) | YES  | UNI | NULL    |                |
| password | varchar(30) | YES  |     | 1234    |                |
| reg_date | datetime    | NO   |     | NULL    |                |
| nickname | varchar(30) | YES  | UNI | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
7 rows in set (0.00 sec)

mysql> alter table kh_member add memo text after password; //password 컬럼 뒤에 추가하기
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc kh_member;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| age      | int(11)     | YES  |     | NULL    |                |
| no       | int(11)     | NO   | PRI | NULL    | auto_increment |
| name     | char(20)    | YES  |     | NULL    |                |
| id       | varchar(20) | YES  | UNI | NULL    |                |
| password | varchar(30) | YES  |     | 1234    |                |
| memo     | text        | YES  |     | NULL    |                |
| reg_date | datetime    | NO   |     | NULL    |                |
| nickname | varchar(30) | YES  | UNI | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)


```

#### 삭제 alter drop

첫번째 컬럼은 Primary 여야함 그래서 맨 위인 age 없애줄거야

```
mysql> alter table kh_member drop age; // age 컬럼 삭제 (drop)
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc kh_member;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| no       | int(11)     | NO   | PRI | NULL    | auto_increment |
| name     | char(20)    | YES  |     | NULL    |                |
| id       | varchar(20) | YES  | UNI | NULL    |                |
| password | varchar(30) | YES  |     | 1234    |                |
| memo     | text        | YES  |     | NULL    |                |
| reg_date | datetime    | NO   |     | NULL    |                |
| nickname | varchar(30) | YES  | UNI | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
7 rows in set (0.00 sec)

```

#### 수정 alter modify, change

```
제약조건이나 옵션이 있다면 다 포함해서 입력해주어야함

mysql> alter table kh_member modify // 수정 (modify)
    -> password char(50) default "P@ssw0rd";
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc kh_member;
+----------+-------------+------+-----+----------+----------------+
| Field    | Type        | Null | Key | Default  | Extra          |
+----------+-------------+------+-----+----------+----------------+
| no       | int(11)     | NO   | PRI | NULL     | auto_increment |
| name     | char(20)    | YES  |     | NULL     |                |
| id       | varchar(20) | YES  | UNI | NULL     |                |
| password | char(50)    | YES  |     | P@ssw0rd |                |
| memo     | text        | YES  |     | NULL     |                |
| reg_date | datetime    | NO   |     | NULL     |                |
| nickname | varchar(30) | YES  | UNI | NULL     |                |
+----------+-------------+------+-----+----------+----------------+
7 rows in set (0.00 sec)

컬럼 이름까지 바꿀 때는 change 사용해야 함

mysql> alter table kh_member change
    -> memo address char(255);
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc kh_member;
+----------+-------------+------+-----+----------+----------------+
| Field    | Type        | Null | Key | Default  | Extra          |
+----------+-------------+------+-----+----------+----------------+
| no       | int(11)     | NO   | PRI | NULL     | auto_increment |
| name     | char(20)    | YES  |     | NULL     |                |
| id       | varchar(20) | YES  | UNI | NULL     |                |
| password | char(50)    | YES  |     | P@ssw0rd |                |
| address  | char(255)   | YES  |     | NULL     |                |
| reg_date | datetime    | NO   |     | NULL     |                |
| nickname | varchar(30) | YES  | UNI | NULL     |                |
+----------+-------------+------+-----+----------+----------------+
7 rows in set (0.00 sec)


-> 컬럼명 안바꾸면 modify, 컬럼명 까지 바꿔줄꺼면 change 사용해주기
```

#### 이름바꾸기 alter rename, rename to

```
mysql> alter table kh_member rename kisa_member; // kh_member 에서 kisa_member로 변경 
Query OK, 0 rows affected (0.00 sec)

mysql> show tables;
+-----------------+
| Tables_in_kh_db |
+-----------------+
| kisa_member     |
+-----------------+
1 row in set (0.00 sec)

-> 위에랑 밑에랑 똑같이 이름 바꿔주는 명령어임!!

mysql> rename table kisa_member to kh_mem;
Query OK, 0 rows affected (0.00 sec)

mysql> show tables;
+-----------------+
| Tables_in_kh_db |
+-----------------+
| kh_mem          |
+-----------------+
1 row in set (0.00 sec)


```

#### 추가 insert

```
mysql> insert into kh_mem values
    -> ('','홍길동','ktest','keroro2424.','강남',now(),'강사');
Query OK, 1 row affected, 1 warning (0.00 sec)

```

#### 초기화 truncate

```
mysql> truncate kh_mem;
Query OK, 0 rows affected (0.00 sec)

mysql> show tables;
+-----------------+
| Tables_in_kh_db |
+-----------------+
| kh_mem          |
+-----------------+
1 row in set (0.00 sec)

mysql> select * from kh_mem;
Empty set (0.00 sec)

```

#### 지우기 drop

```
mysql> drop table kh_mem;
Query OK, 0 rows affected (0.00 sec)

mysql> show tables;
Empty set (0.00 sec)

mysql> drop database kh_db;
Query OK, 0 rows affected, 2 warnings (0.00 sec)

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| test               |
+--------------------+
3 rows in set (0.00 sec)

```

### 실습 36p

#### member 테이블 만들기

```
mysql> create database khacademy;
Query OK, 1 row affected (0.00 sec)

mysql> use khacademy;
Database changed
mysql> create table member (
    -> id varchar(20) not null unique,
    -> pass varchar(20) not null,
    -> name varchar(20) not null,
    -> sex char, 
    -> tel varchar(20) default '010-0000-0000',
    -> address varchar(90)
    -> );
Query OK, 0 rows affected (0.01 sec)

mysql> desc member;
+---------+-------------+------+-----+---------------+-------+
| Field   | Type        | Null | Key | Default       | Extra |
+---------+-------------+------+-----+---------------+-------+
| id      | varchar(20) | NO   | PRI | NULL          |       |
| pass    | varchar(20) | NO   |     | NULL          |       |
| name    | varchar(20) | NO   |     | NULL          |       |
| sex     | char(1)     | YES  |     | NULL          |       |
| tel     | varchar(20) | YES  |     | 010-0000-0000 |       |
| address | varchar(90) | YES  |     | NULL          |       |
+---------+-------------+------+-----+---------------+-------+
6 rows in set (0.00 sec)

-> primary 키 지정 안해줬지만 자동적으로 not NULL과 unique가 적용된 id가 Primary 키로
```



#### freeboard 테이블 만들기

```
mysql> create table freeboard (
    -> num int auto_increment primary key,
    -> name varchar(20) not null,
    -> email varchar(20),
    -> subject varchar(100) not null,
    -> content varchar(500) not null,
    -> regist_day varchar(20),
    -> ip varchar(20)
    -> );
Query OK, 0 rows affected (0.00 sec)

mysql> desc freeboard;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| num        | int(11)      | NO   | PRI | NULL    | auto_increment |
| name       | varchar(20)  | NO   |     | NULL    |                |
| email      | varchar(20)  | YES  |     | NULL    |                |
| subject    | varchar(100) | NO   |     | NULL    |                |
| content    | varchar(500) | NO   |     | NULL    |                |
| regist_day | varchar(20)  | YES  |     | NULL    |                |
| ip         | varchar(20)  | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+
7 rows in set (0.00 sec)

```



### 실습 37p

#### member

```
mysql> alter table member add
    -> no int auto_increment primary key first;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc member;
+---------+-------------+------+-----+---------------+----------------+
| Field   | Type        | Null | Key | Default       | Extra          |
+---------+-------------+------+-----+---------------+----------------+
| no      | int(11)     | NO   | PRI | NULL          | auto_increment |
| id      | varchar(20) | NO   | UNI | NULL          |                |
| pass    | varchar(20) | NO   |     | NULL          |                |
| name    | varchar(20) | NO   |     | NULL          |                |
| sex     | char(1)     | YES  |     | NULL          |                |
| tel     | varchar(20) | YES  |     | 010-0000-0000 |                |
| address | varchar(90) | YES  |     | NULL          |                |
+---------+-------------+------+-----+---------------+----------------+
7 rows in set (0.00 sec)

mysql> alter table member modify 
    -> pass varchar(50);
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc member;
+---------+-------------+------+-----+---------------+----------------+
| Field   | Type        | Null | Key | Default       | Extra          |
+---------+-------------+------+-----+---------------+----------------+
| no      | int(11)     | NO   | PRI | NULL          | auto_increment |
| id      | varchar(20) | NO   | UNI | NULL          |                |
| pass    | varchar(50) | YES  |     | NULL          |                |
| name    | varchar(20) | NO   |     | NULL          |                |
| sex     | char(1)     | YES  |     | NULL          |                |
| tel     | varchar(20) | YES  |     | 010-0000-0000 |                |
| address | varchar(90) | YES  |     | NULL          |                |
+---------+-------------+------+-----+---------------+----------------+
7 rows in set (0.00 sec)

mysql> 
mysql> alter table member modify
    -> pass varchar(50) not null; // not null까지 써야 적용됨
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc member;
+---------+-------------+------+-----+---------------+----------------+
| Field   | Type        | Null | Key | Default       | Extra          |
+---------+-------------+------+-----+---------------+----------------+
| no      | int(11)     | NO   | PRI | NULL          | auto_increment |
| id      | varchar(20) | NO   | UNI | NULL          |                |
| pass    | varchar(50) | NO   |     | NULL          |                |
| name    | varchar(20) | NO   |     | NULL          |                |
| sex     | char(1)     | YES  |     | NULL          |                |
| tel     | varchar(20) | YES  |     | 010-0000-0000 |                |
| address | varchar(90) | YES  |     | NULL          |                |
+---------+-------------+------+-----+---------------+----------------+
7 rows in set (0.00 sec)

mysql> alter table member change
    -> sex age int;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc member;
+---------+-------------+------+-----+---------------+----------------+
| Field   | Type        | Null | Key | Default       | Extra          |
+---------+-------------+------+-----+---------------+----------------+
| no      | int(11)     | NO   | PRI | NULL          | auto_increment |
| id      | varchar(20) | NO   | UNI | NULL          |                |
| pass    | varchar(50) | NO   |     | NULL          |                |
| name    | varchar(20) | NO   |     | NULL          |                |
| age     | int(11)     | YES  |     | NULL          |                |
| tel     | varchar(20) | YES  |     | 010-0000-0000 |                |
| address | varchar(90) | YES  |     | NULL          |                |
+---------+-------------+------+-----+---------------+----------------+
7 rows in set (0.01 sec)

    -> address reg_date datetime not null;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc member;
+----------+-------------+------+-----+---------------+----------------+
| Field    | Type        | Null | Key | Default       | Extra          |
+----------+-------------+------+-----+---------------+----------------+
| no       | int(11)     | NO   | PRI | NULL          | auto_increment |
| id       | varchar(20) | NO   | UNI | NULL          |                |
| pass     | varchar(50) | NO   |     | NULL          |                |
| name     | varchar(20) | NO   |     | NULL          |                |
| age      | int(11)     | YES  |     | NULL          |                |
| tel      | varchar(20) | YES  |     | 010-0000-0000 |                |
| reg_date | datetime    | NO   |     | NULL          |                |
+----------+-------------+------+-----+---------------+----------------+
7 rows in set (0.00 sec)

mysql> alter table member drop tel;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc member;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| no       | int(11)     | NO   | PRI | NULL    | auto_increment |
| id       | varchar(20) | NO   | UNI | NULL    |                |
| pass     | varchar(50) | NO   |     | NULL    |                |
| name     | varchar(20) | NO   |     | NULL    |                |
| age      | int(11)     | YES  |     | NULL    |                |
| reg_date | datetime    | NO   |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
6 rows in set (0.01 sec)

mysql> alter table member rename kh_mem;
Query OK, 0 rows affected (0.00 sec)

mysql> show tables;
+---------------------+
| Tables_in_khacademy |
+---------------------+
| freeboard           |
| kh_mem              |
+---------------------+
2 rows in set (0.00 sec)


```



#### freeboard

```
mysql> alter table freeboard add passwd varchar(20) default '0000' after name;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc freeboard;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| num        | int(11)      | NO   | PRI | NULL    | auto_increment |
| name       | varchar(20)  | NO   |     | NULL    |                |
| passwd     | varchar(20)  | YES  |     | 0000    |                |
| email      | varchar(20)  | YES  |     | NULL    |                |
| subject    | varchar(100) | NO   |     | NULL    |                |
| content    | varchar(500) | NO   |     | NULL    |                |
| regist_day | varchar(20)  | YES  |     | NULL    |                |
| ip         | varchar(20)  | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)

mysql> alter table freeboard modify content text not null;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc freeboard;
+------------+--------------+------+-----+---------+----------------+
| Field      | Type         | Null | Key | Default | Extra          |
+------------+--------------+------+-----+---------+----------------+
| num        | int(11)      | NO   | PRI | NULL    | auto_increment |
| name       | varchar(20)  | NO   |     | NULL    |                |
| passwd     | varchar(20)  | YES  |     | 0000    |                |
| email      | varchar(20)  | YES  |     | NULL    |                |
| subject    | varchar(100) | NO   |     | NULL    |                |
| content    | text         | NO   |     | NULL    |                |
| regist_day | varchar(20)  | YES  |     | NULL    |                |
| ip         | varchar(20)  | YES  |     | NULL    |                |
+------------+--------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)

mysql> alter table freeboard change
    -> regist_day reg_date datetime not null;
Query OK, 0 rows affected (0.01 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> alter table freeboard drop email;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> desc freeboard;
+----------+--------------+------+-----+---------+----------------+
| Field    | Type         | Null | Key | Default | Extra          |
+----------+--------------+------+-----+---------+----------------+
| num      | int(11)      | NO   | PRI | NULL    | auto_increment |
| name     | varchar(20)  | NO   |     | NULL    |                |
| passwd   | varchar(20)  | YES  |     | 0000    |                |
| subject  | varchar(100) | NO   |     | NULL    |                |
| content  | text         | NO   |     | NULL    |                |
| reg_date | datetime     | NO   |     | NULL    |                |
| ip       | varchar(20)  | YES  |     | NULL    |                |
+----------+--------------+------+-----+---------+----------------+
7 rows in set (0.00 sec)

```





### Data 생성 46p

#### 모든 컬럼에 데이터 입력

```
mysql> insert into kh_mem values
    -> ('','test','qwer1234','테스터',25,now());
Query OK, 1 row affected, 1 warning (0.00 sec)

```

#### 특정 컬럼만  지정해서 데이터 입력_방법1

```
mysql> insert into kh_mem ( name, id, pass, reg_date)
    -> values ('테스터2', 'test2', '1234qwer',now());
Query OK, 1 row affected (0.00 sec)

```

#### 특정컬럼을 지정해서 데이터 입력할 경우_방법2

```
mysql> insert into kh_mem set 
    -> id='test3', pass='P@ssw0rd', name='테스터3', age=30, reg_date=now();
Query OK, 1 row affected (0.00 sec)

```

방금한거 확인해보기

```
mysql> show tables;
+---------------------+
| Tables_in_khacademy |
+---------------------+
| freeboard           |
| kh_mem              |
+---------------------+
2 rows in set (0.00 sec)

mysql> select * from kh_mem; // kh_mem 다 보여줘
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  2 | test2 | 1234qwer | 테스터2    | NULL | 2020-08-26 16:10:08 |
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
3 rows in set (0.00 sec)

-> 조건을 만족하지 못하면 안나옴
mysql> select * from freeboard;
Empty set (0.00 sec) // 이렇게 empty 출력

mysql> select name, id, age from kh_mem;  
+------------+-------+------+
| name       | id    | age  |
+------------+-------+------+
| 테스터     | test  |   25 |
| 테스터2    | test2 | NULL |
| 테스터3    | test3 |   30 |
+------------+-------+------+
3 rows in set (0.00 sec)

```

### 조건 주기 (where 이용)

```
mysql> select * from kh_mem where id="test";
+----+------+----------+-----------+------+---------------------+
| no | id   | pass     | name      | age  | reg_date            |
+----+------+----------+-----------+------+---------------------+
|  1 | test | qwer1234 | 테스터    |   25 | 2020-08-26 16:07:42 |
+----+------+----------+-----------+------+---------------------+
1 row in set (0.00 sec)

```

#### 조건 주기 (where + 조건연산자 이용_AND)

```
mysql> select * from kh_mem where age > 20 and age <29;
+----+------+----------+-----------+------+---------------------+
| no | id   | pass     | name      | age  | reg_date            |
+----+------+----------+-----------+------+---------------------+
|  1 | test | qwer1234 | 테스터    |   25 | 2020-08-26 16:07:42 |
+----+------+----------+-----------+------+---------------------+
1 row in set (0.00 sec)

```

#### 조건 주기 (where + 조건연산자 이용_OR)

```
mysql> select * from kh_mem where age > 20 or age <29;
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
2 rows in set (0.00 sec)

```

#### 여러개 조건

```
mysql> select * from kh_mem where
    -> id='test' or no=3 and name='테스터3'; //이렇게 하면 안먹어
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
2 rows in set (0.00 sec)

mysql> select * from kh_mem where (id='test' or no=3) and name='테스터3'; //괄호 이용해야해
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
1 row in set (0.00 sec)

```



### 패턴 ~시작하거나 ~로 끝나거나 (like)

#### 모두 골라줘 (%)

```
mysql> select * from kh_mem where
    -> id like 'test%'; // like 이용 -> test%= test로 시작하는 애들 골라줘!
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  2 | test2 | 1234qwer | 테스터2    | NULL | 2020-08-26 16:10:08 |
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
3 rows in set (0.00 sec)

```

#### 한자리 단어 (_)

```
mysql> select * from kh_mem where
    -> id like 'tes_';
+----+------+----------+-----------+------+---------------------+
| no | id   | pass     | name      | age  | reg_date            |
+----+------+----------+-----------+------+---------------------+
|  1 | test | qwer1234 | 테스터    |   25 | 2020-08-26 16:07:42 |
+----+------+----------+-----------+------+---------------------+
1 row in set (0.00 sec)
```



### 여러개 비교할 때 (in)

```
mysql> select * from kh_mem where id in ('test','test3');
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
2 rows in set (0.00 sec)

만약 in을 안쓴다면 쿼리문이 길어짐 그래서 여러개 쓸 때 걍 in으로 쓰는게 편함
mysql> select * from kh_mem where id='test' or id='test3';
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
2 rows in set (0.00 sec)

```

### 예제들 모아보기 

```
mysql> select * from  kh_mem where
    -> pass like '%12%';
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  2 | test2 | 1234qwer | 테스터2    | NULL | 2020-08-26 16:10:08 |
+----+-------+----------+------------+------+---------------------+
2 rows in set (0.00 sec)

<나갔다들어와서 다시 khacademy로 들어가기>
mysql> use khacademy
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> select * from kh_mem where age >= 20 and age < 30;
+----+------+----------+-----------+------+---------------------+
| no | id   | pass     | name      | age  | reg_date            |
+----+------+----------+-----------+------+---------------------+
|  1 | test | qwer1234 | 테스터    |   25 | 2020-08-26 16:07:42 |
+----+------+----------+-----------+------+---------------------+
1 row in set (0.00 sec)

mysql> select * from kh_mem where age between 20 and 29;
+----+------+----------+-----------+------+---------------------+
| no | id   | pass     | name      | age  | reg_date            |
+----+------+----------+-----------+------+---------------------+
|  1 | test | qwer1234 | 테스터    |   25 | 2020-08-26 16:07:42 |
+----+------+----------+-----------+------+---------------------+
1 row in set (0.00 sec)

mysql> select * from kh_mem where age not between 20 and 29;
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
1 row in set (0.00 sec)

mysql> select * from kh_mem where age is null;
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  2 | test2 | 1234qwer | 테스터2    | NULL | 2020-08-26 16:10:08 |
+----+-------+----------+------------+------+---------------------+
1 row in set (0.00 sec)

mysql> select * from kh_mem where age is not null;
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  3 | test3 | P@ssw0rd | 테스터3    |   30 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
2 rows in set (0.00 sec)


```



### +DB는 어디에 저장되고 있을까?

```
[root@Linux-04 lib]# cd /var/lib/mysql
[root@Linux-04 mysql]# ls -l
합계 20492
-rw-rw---- 1 mysql mysql  5242880 2020-08-26 14:29 ib_logfile0
-rw-rw---- 1 mysql mysql  5242880 2020-08-26 14:28 ib_logfile1
-rw-rw---- 1 mysql mysql 10485760 2020-08-26 14:29 ibdata1
drwx------ 2 mysql mysql     4096 2020-08-26 15:50 khacademy
drwx------ 2 mysql mysql     4096 2020-08-26 14:28 mysql
srwxrwxrwx 1 mysql mysql        0 2020-08-26 14:29 mysql.sock
drwx------ 2 mysql mysql     4096 2020-08-26 14:28 test
[root@Linux-04 mysql]# cd khacademy/
[root@Linux-04 khacademy]# ls -l
합계 40
-rw-rw---- 1 mysql mysql   61 2020-08-26 15:16 db.opt
-rw-rw---- 1 mysql mysql    0 2020-08-26 15:50 freeboard.MYD
-rw-rw---- 1 mysql mysql 1024 2020-08-26 15:50 freeboard.MYI
-rw-rw---- 1 mysql mysql 8758 2020-08-26 15:50 freeboard.frm // 요기에 저장중~
-rw-rw---- 1 mysql mysql  140 2020-08-26 16:12 kh_mem.MYD
-rw-rw---- 1 mysql mysql 3072 2020-08-26 16:12 kh_mem.MYI
-rw-rw---- 1 mysql mysql 8708 2020-08-26 15:47 kh_mem.frm // 요기에~

```



### DATA 수정 (Update set)

```
mysql> update kh_mem set age=20; // 이렇게되면 다 20살로 바뀜 ㅠ
Query OK, 3 rows affected (0.00 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> select * from kh_mem;
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   20 | 2020-08-26 16:07:42 |
|  2 | test2 | 1234qwer | 테스터2    |   20 | 2020-08-26 16:10:08 |
|  3 | test3 | P@ssw0rd | 테스터3    |   20 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
3 rows in set (0.01 sec)

mysql> update kh_mem set age=25 where no=1; // 이렇게 조건을 꼭 넣어줘야함
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from kh_mem;
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  2 | test2 | 1234qwer | 테스터2    |   20 | 2020-08-26 16:10:08 |
|  3 | test3 | P@ssw0rd | 테스터3    |   20 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
3 rows in set (0.00 sec)


```

#### 2개의 컬럼 한번에 바꾸기 

```
mysql> update kh_mem set pass='1q2w3e4r', age=31 where id='test3'; //조건 꼭!!!
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from kh_mem;
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  2 | test2 | 1234qwer | 테스터2    |   20 | 2020-08-26 16:10:08 |
|  3 | test3 | 1q2w3e4r | 테스터3    |   31 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
3 rows in set (0.00 sec)


```



### DATA 삭제 (Delect from)_조건필수 (where)

```
mysql> delete from kh_mem where no=2;
Query OK, 1 row affected (0.00 sec)

mysql> select * from kh_mem;
+----+-------+----------+------------+------+---------------------+
| no | id    | pass     | name       | age  | reg_date            |
+----+-------+----------+------------+------+---------------------+
|  1 | test  | qwer1234 | 테스터     |   25 | 2020-08-26 16:07:42 |
|  3 | test3 | 1q2w3e4r | 테스터3    |   31 | 2020-08-26 16:12:09 |
+----+-------+----------+------------+------+---------------------+
2 rows in set (0.00 sec)

mysql> delete from kh_mem; // where 조건 안주면 싸그리 다 삭제됨
Query OK, 2 rows affected (0.00 sec)

mysql> select*from kh_mem;
Empty set (0.00 sec)
```

### Truncate VS Delet

- truncate  테이블을 지웟다 만드는거라 테이블 속성 다 지워짐

- delect는 값만 지우는 것 테이블 속성은 그대로@!

  ```
  mysql> show table status;
  +-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+
  | Name      | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time         | Check_time | Collation       | Checksum | Create_options | Comment |
  +-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+
  | freeboard | MyISAM |      10 | Dynamic    |    0 |              0 |           0 | 281474976710655 |         1024 |         0 |              1 | 2020-08-26 15:50:26 | 2020-08-26 15:50:26 | NULL       | utf8_general_ci |     NULL |                |         |
  | kh_mem    | MyISAM |      10 | Dynamic    |    0 |              0 |           0 | 281474976710655 |         1024 |         0 |              4 | 2020-08-26 15:47:09 | 2020-08-26 16:48:05 | NULL       | utf8_general_ci |     NULL |                |         |
  +-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+
  2 rows in set (0.00 sec)
  
  ->delet 후에 status 본 모습
  kh_mem 은 4니까 다음꺼 4부터 시작
  1부터 시작으로 만들고 싶으면 auto_increment 이용하기 
  
  
  
  mysql> alter table kh_mem auto_increment=1;
  Query OK, 0 rows affected (0.02 sec)
  Records: 0  Duplicates: 0  Warnings: 0
  
  mysql> show table status;
  +-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+
  | Name      | Engine | Version | Row_format | Rows | Avg_row_length | Data_length | Max_data_length | Index_length | Data_free | Auto_increment | Create_time         | Update_time         | Check_time | Collation       | Checksum | Create_options | Comment |
  +-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+
  | freeboard | MyISAM |      10 | Dynamic    |    0 |              0 |           0 | 281474976710655 |         1024 |         0 |              1 | 2020-08-26 15:50:26 | 2020-08-26 15:50:26 | NULL       | utf8_general_ci |     NULL |                |         |
  | kh_mem    | MyISAM |      10 | Dynamic    |    0 |              0 |           0 | 281474976710655 |         1024 |         0 |              1 | 2020-08-26 16:49:52 | 2020-08-26 16:49:52 | NULL       | utf8_general_ci |     NULL |                |         |
  +-----------+--------+---------+------------+------+----------------+-------------+-----------------+--------------+-----------+----------------+---------------------+---------------------+------------+-----------------+----------+----------------+---------+
  2 rows in set (0.00 sec)
  
  ```

  

### Query 54p

쌤이 주신 naverdb.spl 파일 복사해서 CentOS 바탕화면에 복붙하기

[root@Linux-04 khacademy]# cd /root/바탕화면
[root@Linux-04 바탕화면]# ls
naverdb.sql
[root@Linux-04 바탕화면]# vim naverdb.sql
[root@Linux-04 바탕화면]# mysql < naverdb.sql // naverdb내용을 mysql에 적용시키겠다.

[root@Linux-04 바탕화면]# mysql

```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| khacademy          |
| mysql              |
| naver_db           |
| test               |
+--------------------+
5 rows in set (0.00 sec)

mysql> use naver_db;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> desc member;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| no       | int(11)     | NO   | PRI | NULL    | auto_increment |
| id       | varchar(10) | NO   | UNI | NULL    |                |
| name     | varchar(20) | NO   |     | NULL    |                |
| sex      | char(1)     | YES  |     | NULL    |                |
| post_num | char(8)     | YES  |     | NULL    |                |
| address  | varchar(80) | YES  |     | NULL    |                |
| tel      | varchar(15) | YES  |     | NULL    |                |
| age      | int(11)     | YES  |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)

mysql> select * from member;
+----+---------+-----------+------+----------+---------------------------------------------+----------+------+
| no | id      | name      | sex  | post_num | address                                     | tel      | age  |
+----+---------+-----------+------+----------+---------------------------------------------+----------+------+
|  1 | yjhwang | 황영주    | M    | 100-011  | 서울시 중구 충무로1가                       | 234-8879 |   35 |
|  2 | khshul  | 설기형    | M    | 607-010  | 부산시 동래구 명륜동                        | 764-3784 |   33 |
|  3 | chpark  | 박철호    | M    | 503-200  | 광주시 남구 지석동                          | 298-9730 |   34 |
|  4 | shlee   | 이상훈    | M    | 503-200  | 광주시 남구 도금동                          | 838-4347 |   32 |
|  5 | jyjang  | 장영숙    | W    | 503-201  | 부산시 영도구 봉래동5가                     | 399-9809 |   24 |
|  6 | yjbae   | 배용진    | M    | 606-065  | 서울시 은평구 응암4동                       | 857-5683 |   30 |
|  7 | hbpark  | 박혜빈    | W    | 122-014  | 경기도 과천시 중앙동                        | 234-7677 |   22 |
|  8 | mskim   | 김문수    | M    | 427-760  | 경기도 시흥시 신천동                        | 370-6003 |   63 |
|  9 | bkcha   | 차범길    | M    | 429-020  | 대전시 서구 둔산1동                         | 432-9877 |   49 |
| 10 | kskim   | 김길수    | M    | 302-121  | 경기도 수원시 장안구 파장동                 | 324-5875 |   54 |
| 11 | srkim   | 김수련    | M    | 440-747  | 대구시 달서구 신당동                        | 987-3688 |   23 |
| 12 | srlee   | 이성현    | M    | 704-701  | 경기도 수원시 권선구 매산로1가              | 243-6844 |   36 |
| 13 | hnjang  | 정한나    | W    | 441-081  | 광주시 서구 화정4동                         | 845-4547 |   58 |
| 14 | mylee   | 이명연    | W    | 502-791  | 광주시 서구 쌍촌동                          | 837-9432 |   33 |
| 15 | yskim   | 김영숙    | W    | 429-010  | 경기도 시흥시 대야동                        | 374-8438 |   53 |
+----+---------+-----------+------+----------+---------------------------------------------+----------+------+
15 rows in set (0.00 sec)

mysql> select * from mysql.user;
+-----------+------+----------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+
| Host      | User | Password | Select_priv | Insert_priv | Update_priv | Delete_priv | Create_priv | Drop_priv | Reload_priv | Shutdown_priv | Process_priv | File_priv | Grant_priv | References_priv | Index_priv | Alter_priv | Show_db_priv | Super_priv | Create_tmp_table_priv | Lock_tables_priv | Execute_priv | Repl_slave_priv | Repl_client_priv | Create_view_priv | Show_view_priv | Create_routine_priv | Alter_routine_priv | Create_user_priv | Event_priv | Trigger_priv | ssl_type | ssl_cipher | x509_issuer | x509_subject | max_questions | max_updates | max_connections | max_user_connections |
+-----------+------+----------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+
| localhost | root |          | Y           | Y           | Y           | Y           | Y           | Y         | Y           | Y             | Y            | Y         | Y          | Y               | Y          | Y          | Y            | Y          | Y                     | Y                | Y            | Y               | Y                | Y                | Y              | Y                   | Y                  | Y                | Y          | Y            |          |            |             |              |             0 |           0 |               0 |                    0 |
| linux-04  | root |          | Y           | Y           | Y           | Y           | Y           | Y         | Y           | Y             | Y            | Y         | Y          | Y               | Y          | Y          | Y            | Y          | Y                     | Y                | Y            | Y               | Y                | Y                | Y              | Y                   | Y                  | Y                | Y          | Y            |          |            |             |              |             0 |           0 |               0 |                    0 |
| 127.0.0.1 | root |          | Y           | Y           | Y           | Y           | Y           | Y         | Y           | Y             | Y            | Y         | Y          | Y               | Y          | Y          | Y            | Y          | Y                     | Y                | Y            | Y               | Y                | Y                | Y              | Y                   | Y                  | Y                | Y          | Y            |          |            |             |              |             0 |           0 |               0 |                    0 |
| localhost |      |          | N           | N           | N           | N           | N           | N         | N           | N             | N            | N         | N          | N               | N          | N          | N            | N          | N                     | N                | N            | N               | N                | N                | N              | N                   | N                  | N                | N          | N            |          |            |             |              |             0 |           0 |               0 |                    0 |
| linux-04  |      |          | N           | N           | N           | N           | N           | N         | N           | N             | N            | N         | N          | N               | N          | N          | N            | N          | N                     | N                | N            | N               | N                | N                | N              | N                   | N                  | N                | N          | N            |          |            |             |              |             0 |           0 |               0 |                    0 |
+-----------+------+----------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+
5 rows in set (0.00 sec)

```



### DB를 설치하고 해야하는 일

1. root 계정 비밀번호 설정

   update mysql.user set password=password('비밀번호') where user='root';

   

2. 익명계정 삭제

   delete from mysql.user where user'';

   delete from mysql.db where user='';

   

3. 적용

   flush privileges; 아니면 service mysqld restart

4. mysql 접근 방법

   - #mysql -u [계정명] -p

     비밀번호 입력 : 

   - #mysql -u [계정명] -p[비밀번호]

   - #mysql -u [계정명] -p[DB명]

     비밀번호 입력 : 

   - #mysql -u [계정명] -p[비밀번호 ] [DB명]

   



1. 계정 비밀번호 설정

```
mysql> select host, user, password from user;
+-----------+------+----------+
| host      | user | password |
+-----------+------+----------+
| localhost | root |          |
| linux-04  | root |          |
| 127.0.0.1 | root |          |
| localhost |      |          |
| linux-04  |      |          |
+-----------+------+----------+
5 rows in set (0.00 sec)

-> 비어있는거 = 익명계정 (localhost, linux-04, root의 비밀번호들)
비밀번호 -> root 계정 삽입시 update로 비밀번호 입력 해주어야함

mysql> update user set password='1234' where user='root';
Query OK, 3 rows affected (0.00 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> select host, user, password from user;
+-----------+------+----------+
| host      | user | password |
+-----------+------+----------+
| localhost | root | 1234     |
| linux-04  | root | 1234     |
| 127.0.0.1 | root | 1234     |
| localhost |      |          |
| linux-04  |      |          |
+-----------+------+----------+
5 rows in set (0.00 sec)

-> 근데 실질적으로 이렇게 안넣음 (비밀번호를 평문으로 안넣는다는 뜻) password 함수 이용해서 넣음

mysql> update user set password=password('1234')
    -> where user='root';
Query OK, 3 rows affected (0.00 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> select host, user, password from user;
+-----------+------+-------------------------------------------+
| host      | user | password                                  |
+-----------+------+-------------------------------------------+
| localhost | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
| linux-04  | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
| 127.0.0.1 | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
| localhost |      |                                           |
| linux-04  |      |                                           |
+-----------+------+-------------------------------------------+
5 rows in set (0.00 sec)
-> 구럼 이렇게 암호화 되어서 들어감


```

2. 삭제하기

```
mysql> delete from user where user='';
Query OK, 2 rows affected (0.00 sec)

mysql> select host, user, password from user;
+-----------+------+-------------------------------------------+
| host      | user | password                                  |
+-----------+------+-------------------------------------------+
| localhost | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
| linux-04  | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
| 127.0.0.1 | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
+-----------+------+-------------------------------------------+
3 rows in set (0.00 sec)
```

익명계정은 여기도 있어요

```
mysql> select host, db, user from db;
+------+---------+------+
| host | db      | user |
+------+---------+------+
| %    | test    |      |
| %    | test\_% |      |
+------+---------+------+
2 rows in set (0.00 sec)

삭제삭제

mysql> delete from db where user='';
Query OK, 2 rows affected (0.00 sec)

mysql> select host, db, user from db;
Empty set (0.00 sec)


```

3. 적용

```
mysql> drop database naver_db;
Query OK, 1 row affected (0.02 sec)

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| khacademy          |
| mysql              |
| test               |
+--------------------+
4 rows in set (0.00 sec)

mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)

이제 나가서 다시 mysql 들어가면 못들어가 
왜? 비밀번호 설정해줘서 ㅠ
[root@Linux-04 바탕화면]# mysql 
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO) 
```

4. mysql 접근

   ```
   [root@Linux-04 바탕화면]# mysql -u root -p
   Enter password: 
   Welcome to the MySQL monitor.  Commands end with ; or \g.
   Your MySQL connection id is 7
   Server version: 5.1.73 Source distribution
   
   Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
   
   Oracle is a registered trademark of Oracle Corporation and/or its
   affiliates. Other names may be trademarks of their respective
   owners.
   
   Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
   
   
   ```

   ```
   [root@Linux-04 바탕화면]# mysql -u root -p1234 khacademy
   Reading table information for completion of table and column names
   You can turn off this feature to get a quicker startup with -A
   
   Welcome to the MySQL monitor.  Commands end with ; or \g.
   Your MySQL connection id is 8
   Server version: 5.1.73 Source distribution
   
   Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
   
   Oracle is a registered trademark of Oracle Corporation and/or its
   affiliates. Other names may be trademarks of their respective
   owners.
   
   Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
   
   mysql> show tables;
   +---------------------+
   | Tables_in_khacademy |
   +---------------------+
   | freeboard           |
   | kh_mem              |
   +---------------------+
   2 rows in set (0.00 sec)
   
   ```

   ```
   [root@Linux-04 바탕화면]# mysql < naverdb.sql
   ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: NO)
   [root@Linux-04 바탕화면]# mysql -u root -p < naverdb.sql 
   Enter password: 
   ```

   

   ### 자동 활성화 해주기

   ```
   [root@Linux-04 바탕화면]# chkconfig mysqld on
   [root@Linux-04 바탕화면]# chkconfig --list | grep mysqld
   mysqld         	0:해제	1:해제	2:활성	3:활성	4:활성	5:활성	6:해제
   
   ```

   

























