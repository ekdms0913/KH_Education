# 8.27 DCL

### 실습_DML 58p

[root@Linux-04 바탕화면]# mysql -u root -p1234 khacademy

```
mysql> show tables;
+--------------------+
| Tables_in_naver_db |
+--------------------+
| member             |
+--------------------+
1 row in set (0.00 sec)

mysql> desc member;
+----------+-------------+------+-----+---------+----------------+
| Field    | Type        | Null | Key | Default | Extra          |
+----------+-------------+------+-----+---------+----------------+
| no       | int(11)     | NO   | PRI | NULL    | auto_increment |
| id       | varchar(10) | NO   | UNI | NULL    |                |
| name     | varchar(20) | NO   |     | NULL    |                |
| sex      | char(1)     | YES  |     | NULL    |                |
| post_num | char(8)     | YES  |     | NULL    |                |
| address  | varchar(80) | YES  |     | NULL    |                |
| tel      | varchar(15) | YES  |     | NULL    |                |
| age      | int(11)     | YES  |     | NULL    |                |
+----------+-------------+------+-----+---------+----------------+
8 rows in set (0.00 sec)


```

```
mysql> insert into member values ('','kuser','박준수','M','135-933','서울시 강남구 역삼동','1544-9970',20);
Query OK, 1 row affected, 1 warning (0.00 sec)


```

```
mysql> select * from member where name='배용진';
+----+-------+-----------+------+----------+--------------------------------+----------+------+
| no | id    | name      | sex  | post_num | address                        | tel      | age  |
+----+-------+-----------+------+----------+--------------------------------+----------+------+
|  6 | yjbae | 배용진    | M    | 606-065  | 서울시 은평구 응암4동          | 857-5683 |   30 |
+----+-------+-----------+------+----------+--------------------------------+----------+------+
1 row in set (0.00 sec)

```

```
mysql> select name, address, age from member
    -> where age between 20 and 29;
+-----------+-----------------------------------+------+
| name      | address                           | age  |
+-----------+-----------------------------------+------+
| 장영숙    | 부산시 영도구 봉래동5가           |   24 |
| 박혜빈    | 경기도 과천시 중앙동              |   22 |
| 김수련    | 대구시 달서구 신당동              |   23 |
| 박준수    | 서울시 강남구 역삼동              |   20 |
+-----------+-----------------------------------+------+
4 rows in set (0.00 sec)

```

```
mysql> select name, age, sex, tel, id from member
    -> where sex='M';
+-----------+------+------+-----------+---------+
| name      | age  | sex  | tel       | id      |
+-----------+------+------+-----------+---------+
| 황영주    |   35 | M    | 234-8879  | yjhwang |
| 설기형    |   33 | M    | 764-3784  | khshul  |
| 박철호    |   34 | M    | 298-9730  | chpark  |
| 이상훈    |   32 | M    | 838-4347  | shlee   |
| 배용진    |   30 | M    | 857-5683  | yjbae   |
| 김문수    |   63 | M    | 370-6003  | mskim   |
| 차범길    |   49 | M    | 432-9877  | bkcha   |
| 김길수    |   54 | M    | 324-5875  | kskim   |
| 김수련    |   23 | M    | 987-3688  | srkim   |
| 박준수    |   20 | M    | 1544-9970 | kuser   |
+-----------+------+------+-----------+---------+
10 rows in set (0.00 sec)

mysql> select age, address from member
    -> where (age < 30 or age >=50) and sex='W'
    -> ;
+------+-----------------------------------+
| age  | address                           |
+------+-----------------------------------+
|   24 | 부산시 영도구 봉래동5가           |
|   22 | 경기도 과천시 중앙동              |
|   58 | 광주시 서구 화정4동               |
|   53 | 경기도 시흥시 대야동              |
+------+-----------------------------------+
4 rows in set (0.00 sec)

mysql> select age, id, tel from member where
    -> age (between 20 and between 40 and 49) and sex='M';
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'between 20 and between 40 and 49) and sex='M'' at line 2
mysql> select name, age, tel from member
    -> where name like '김%' and sex='M';
+-----------+------+----------+
| name      | age  | tel      |
+-----------+------+----------+
| 김문수    |   63 | 370-6003 |
| 김길수    |   54 | 324-5875 |
| 김수련    |   23 | 987-3688 |
+-----------+------+----------+
3 rows in set (0.00 sec)

mysql> select name, post_num, address, tel from member
    -> where address like '서울%';
+-----------+----------+----------------------------------+-----------+
| name      | post_num | address                          | tel       |
+-----------+----------+----------------------------------+-----------+
| 황영주    | 100-011  | 서울시 중구 충무로1가            | 234-8879  |
| 박철호    | 503-200  | 서울시 동대문구 왕십리           | 298-9730  |
| 배용진    | 606-065  | 서울시 은평구 응암4동            | 857-5683  |
| 박준수    | 135-933  | 서울시 강남구 역삼동             | 1544-9970 |
+-----------+----------+----------------------------------+-----------+
4 rows in set (0.00 sec)

```



```
mysql> select name, sex, id from member
    -> where address like '%광주%' and age >= 50;
+-----------+------+--------+
| name      | sex  | id     |
+-----------+------+--------+
| 정한나    | W    | hnjang |
+-----------+------+--------+
1 row in set (0.00 sec)

```

```
mysql> select sex, name, age from member
    -> where (name like '&수' or name like '%숙') and age between 50 and 59;
+------+-----------+------+
| sex  | name      | age  |
+------+-----------+------+
| W    | 김영숙    |   53 |
+------+-----------+------+
1 row in set (0.00 sec)

```

```
mysql> select name, address, tel from member
    -> where address like '경기도%' and age between 20 and 29;
+-----------+-------------------------------+----------+
| name      | address                       | tel      |
+-----------+-------------------------------+----------+
| 박혜빈    | 경기도 과천시 중앙동          | 234-7677 |
+-----------+-------------------------------+----------+
1 row in set (0.00 sec)

```

```
mysql> select id, age from member
    -> where id like '__p%' or id like '__k%';
+--------+------+
| id     | age  |
+--------+------+
| chpark |   34 |
| hbpark |   22 |
| mskim  |   63 |
| kskim  |   54 |
| srkim  |   23 |
| yskim  |   53 |
+--------+------+
6 rows in set (0.00 sec)

```

```
mysql> select * from member where name ='박철호';
+----+--------+-----------+------+----------+----------------------------+----------+------+
| no | id     | name      | sex  | post_num | address                    | tel      | age  |
+----+--------+-----------+------+----------+----------------------------+----------+------+
|  3 | chpark | 박철호    | M    | 503-200  | 광주시 남구 지석동         | 298-9730 |   34 |
+----+--------+-----------+------+----------+----------------------------+----------+------+
1 row in set (0.00 sec)

mysql> update member set address='서울시 동대문구 왕십리'
    -> where no=3;
Query OK, 1 row affected (0.00 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from member where name ='박철호';
+----+--------+-----------+------+----------+----------------------------------+----------+------+
| no | id     | name      | sex  | post_num | address                          | tel      | age  |
+----+--------+-----------+------+----------+----------------------------------+----------+------+
|  3 | chpark | 박철호    | M    | 503-200  | 서울시 동대문구 왕십리           | 298-9730 |   34 |
+----+--------+-----------+------+----------+----------------------------------+----------+------+
1 row in set (0.00 sec)

```

```
mysql> delete from member where no=12;
Query OK, 1 row affected (0.00 sec)

mysql> select * from member where name ="이성현";
Empty set (0.00 sec)

```



### 데이터 자르기 64p

#### limit

```
mysql> select * from member where sex='M';
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
| no | id      | name      | sex  | post_num | address                                 | tel       | age  |
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
|  1 | yjhwang | 황영주    | M    | 100-011  | 서울시 중구 충무로1가                   | 234-8879  |   35 |
|  2 | khshul  | 설기형    | M    | 607-010  | 부산시 동래구 명륜동                    | 764-3784  |   33 |
|  3 | chpark  | 박철호    | M    | 503-200  | 서울시 동대문구 왕십리                  | 298-9730  |   34 |
|  4 | shlee   | 이상훈    | M    | 503-200  | 광주시 남구 도금동                      | 838-4347  |   32 |
|  6 | yjbae   | 배용진    | M    | 606-065  | 서울시 은평구 응암4동                   | 857-5683  |   30 |
|  8 | mskim   | 김문수    | M    | 427-760  | 경기도 시흥시 신천동                    | 370-6003  |   63 |
|  9 | bkcha   | 차범길    | M    | 429-020  | 대전시 서구 둔산1동                     | 432-9877  |   49 |
| 10 | kskim   | 김길수    | M    | 302-121  | 경기도 수원시 장안구 파장동             | 324-5875  |   54 |
| 11 | srkim   | 김수련    | M    | 440-747  | 대구시 달서구 신당동                    | 987-3688  |   23 |
| 16 | kuser   | 박준수    | M    | 135-933  | 서울시 강남구 역삼동                    | 1544-9970 |   20 |
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
10 rows in set (0.00 sec)

mysql> select * from member where sex='M' limit 3; // limet 사용
+----+---------+-----------+------+----------+----------------------------------+----------+------+
| no | id      | name      | sex  | post_num | address                          | tel      | age  |
+----+---------+-----------+------+----------+----------------------------------+----------+------+
|  1 | yjhwang | 황영주    | M    | 100-011  | 서울시 중구 충무로1가            | 234-8879 |   35 |
|  2 | khshul  | 설기형    | M    | 607-010  | 부산시 동래구 명륜동             | 764-3784 |   33 |
|  3 | chpark  | 박철호    | M    | 503-200  | 서울시 동대문구 왕십리           | 298-9730 |   34 |
+----+---------+-----------+------+----------+----------------------------------+----------+------+
3 rows in set (0.00 sec)

```

#### limiet offset_시작은 0부터

```
mysql> select * from member limit 4;
+----+---------+-----------+------+----------+----------------------------------+----------+------+
| no | id      | name      | sex  | post_num | address                          | tel      | age  |
+----+---------+-----------+------+----------+----------------------------------+----------+------+
|  1 | yjhwang | 황영주    | M    | 100-011  | 서울시 중구 충무로1가            | 234-8879 |   35 |
|  2 | khshul  | 설기형    | M    | 607-010  | 부산시 동래구 명륜동             | 764-3784 |   33 |
|  3 | chpark  | 박철호    | M    | 503-200  | 서울시 동대문구 왕십리           | 298-9730 |   34 |
|  4 | shlee   | 이상훈    | M    | 503-200  | 광주시 남구 도금동               | 838-4347 |   32 |
+----+---------+-----------+------+----------+----------------------------------+----------+------+
4 rows in set (0.00 sec)

mysql> select * from member limit 4 offset 3;
+----+--------+-----------+------+----------+-----------------------------------+----------+------+
| no | id     | name      | sex  | post_num | address                           | tel      | age  |
+----+--------+-----------+------+----------+-----------------------------------+----------+------+
|  4 | shlee  | 이상훈    | M    | 503-200  | 광주시 남구 도금동                | 838-4347 |   32 |
|  5 | jyjang | 장영숙    | W    | 503-201  | 부산시 영도구 봉래동5가           | 399-9809 |   24 |
|  6 | yjbae  | 배용진    | M    | 606-065  | 서울시 은평구 응암4동             | 857-5683 |   30 |
|  7 | hbpark | 박혜빈    | W    | 122-014  | 경기도 과천시 중앙동              | 234-7677 |   22 |
+----+--------+-----------+------+----------+-----------------------------------+----------+------+
4 rows in set (0.00 sec)

```

#### 한꺼번에

```
mysql> select * from member limit 3,4;
+----+--------+-----------+------+----------+-----------------------------------+----------+------+
| no | id     | name      | sex  | post_num | address                           | tel      | age  |
+----+--------+-----------+------+----------+-----------------------------------+----------+------+
|  4 | shlee  | 이상훈    | M    | 503-200  | 광주시 남구 도금동                | 838-4347 |   32 |
|  5 | jyjang | 장영숙    | W    | 503-201  | 부산시 영도구 봉래동5가           | 399-9809 |   24 |
|  6 | yjbae  | 배용진    | M    | 606-065  | 서울시 은평구 응암4동             | 857-5683 |   30 |
|  7 | hbpark | 박혜빈    | W    | 122-014  | 경기도 과천시 중앙동              | 234-7677 |   22 |
+----+--------+-----------+------+----------+-----------------------------------+----------+------+
4 rows in set (0.00 sec)

```



#### 정렬 order  ASC DESC(65p)

#### ASC 오름차순

```
mysql> select * from member order by age asc;
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
| no | id      | name      | sex  | post_num | address                                 | tel       | age  |
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
| 16 | kuser   | 박준수    | M    | 135-933  | 서울시 강남구 역삼동                    | 1544-9970 |   20 |
|  7 | hbpark  | 박혜빈    | W    | 122-014  | 경기도 과천시 중앙동                    | 234-7677  |   22 |
| 11 | srkim   | 김수련    | M    | 440-747  | 대구시 달서구 신당동                    | 987-3688  |   23 |
|  5 | jyjang  | 장영숙    | W    | 503-201  | 부산시 영도구 봉래동5가                 | 399-9809  |   24 |
|  6 | yjbae   | 배용진    | M    | 606-065  | 서울시 은평구 응암4동                   | 857-5683  |   30 |
|  4 | shlee   | 이상훈    | M    | 503-200  | 광주시 남구 도금동                      | 838-4347  |   32 |
| 14 | mylee   | 이명연    | W    | 502-791  | 광주시 서구 쌍촌동                      | 837-9432  |   33 |
|  2 | khshul  | 설기형    | M    | 607-010  | 부산시 동래구 명륜동                    | 764-3784  |   33 |
|  3 | chpark  | 박철호    | M    | 503-200  | 서울시 동대문구 왕십리                  | 298-9730  |   34 |
|  1 | yjhwang | 황영주    | M    | 100-011  | 서울시 중구 충무로1가                   | 234-8879  |   35 |
|  9 | bkcha   | 차범길    | M    | 429-020  | 대전시 서구 둔산1동                     | 432-9877  |   49 |
| 15 | yskim   | 김영숙    | W    | 429-010  | 경기도 시흥시 대야동                    | 374-8438  |   53 |
| 10 | kskim   | 김길수    | M    | 302-121  | 경기도 수원시 장안구 파장동             | 324-5875  |   54 |
| 13 | hnjang  | 정한나    | W    | 441-081  | 광주시 서구 화정4동                     | 845-4547  |   58 |
|  8 | mskim   | 김문수    | M    | 427-760  | 경기도 시흥시 신천동                    | 370-6003  |   63 |
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
15 rows in set (0.00 sec)


```

DESC 내림차순

```
mysql> select * from member order by age desc;
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
| no | id      | name      | sex  | post_num | address                                 | tel       | age  |
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
|  8 | mskim   | 김문수    | M    | 427-760  | 경기도 시흥시 신천동                    | 370-6003  |   63 |
| 13 | hnjang  | 정한나    | W    | 441-081  | 광주시 서구 화정4동                     | 845-4547  |   58 |
| 10 | kskim   | 김길수    | M    | 302-121  | 경기도 수원시 장안구 파장동             | 324-5875  |   54 |
| 15 | yskim   | 김영숙    | W    | 429-010  | 경기도 시흥시 대야동                    | 374-8438  |   53 |
|  9 | bkcha   | 차범길    | M    | 429-020  | 대전시 서구 둔산1동                     | 432-9877  |   49 |
|  1 | yjhwang | 황영주    | M    | 100-011  | 서울시 중구 충무로1가                   | 234-8879  |   35 |
|  3 | chpark  | 박철호    | M    | 503-200  | 서울시 동대문구 왕십리                  | 298-9730  |   34 |
|  2 | khshul  | 설기형    | M    | 607-010  | 부산시 동래구 명륜동                    | 764-3784  |   33 |
| 14 | mylee   | 이명연    | W    | 502-791  | 광주시 서구 쌍촌동                      | 837-9432  |   33 |
|  4 | shlee   | 이상훈    | M    | 503-200  | 광주시 남구 도금동                      | 838-4347  |   32 |
|  6 | yjbae   | 배용진    | M    | 606-065  | 서울시 은평구 응암4동                   | 857-5683  |   30 |
|  5 | jyjang  | 장영숙    | W    | 503-201  | 부산시 영도구 봉래동5가                 | 399-9809  |   24 |
| 11 | srkim   | 김수련    | M    | 440-747  | 대구시 달서구 신당동                    | 987-3688  |   23 |
|  7 | hbpark  | 박혜빈    | W    | 122-014  | 경기도 과천시 중앙동                    | 234-7677  |   22 |
| 16 | kuser   | 박준수    | M    | 135-933  | 서울시 강남구 역삼동                    | 1544-9970 |   20 |
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
15 rows in set (0.00 sec)

```

추가로

```
mysql> select * from member order by age asc, no desc;
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
| no | id      | name      | sex  | post_num | address                                 | tel       | age  |
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
| 16 | kuser   | 박준수    | M    | 135-933  | 서울시 강남구 역삼동                    | 1544-9970 |   20 |
|  7 | hbpark  | 박혜빈    | W    | 122-014  | 경기도 과천시 중앙동                    | 234-7677  |   22 |
| 11 | srkim   | 김수련    | M    | 440-747  | 대구시 달서구 신당동                    | 987-3688  |   23 |
|  5 | jyjang  | 장영숙    | W    | 503-201  | 부산시 영도구 봉래동5가                 | 399-9809  |   24 |
|  6 | yjbae   | 배용진    | M    | 606-065  | 서울시 은평구 응암4동                   | 857-5683  |   30 |
|  4 | shlee   | 이상훈    | M    | 503-200  | 광주시 남구 도금동                      | 838-4347  |   32 |
| 14 | mylee   | 이명연    | W    | 502-791  | 광주시 서구 쌍촌동                      | 837-9432  |   33 |
|  2 | khshul  | 설기형    | M    | 607-010  | 부산시 동래구 명륜동                    | 764-3784  |   33 |
|  3 | chpark  | 박철호    | M    | 503-200  | 서울시 동대문구 왕십리                  | 298-9730  |   34 |
|  1 | yjhwang | 황영주    | M    | 100-011  | 서울시 중구 충무로1가                   | 234-8879  |   35 |
|  9 | bkcha   | 차범길    | M    | 429-020  | 대전시 서구 둔산1동                     | 432-9877  |   49 |
| 15 | yskim   | 김영숙    | W    | 429-010  | 경기도 시흥시 대야동                    | 374-8438  |   53 |
| 10 | kskim   | 김길수    | M    | 302-121  | 경기도 수원시 장안구 파장동             | 324-5875  |   54 |
| 13 | hnjang  | 정한나    | W    | 441-081  | 광주시 서구 화정4동                     | 845-4547  |   58 |
|  8 | mskim   | 김문수    | M    | 427-760  | 경기도 시흥시 신천동                    | 370-6003  |   63 |
+----+---------+-----------+------+----------+-----------------------------------------+-----------+------+
15 rows in set (0.00 sec)


```

### 중복제거 Distinct

```
mysql> select sex from member;
+------+
| sex  |
+------+
| M    |
| M    |
| M    |
| M    |
| W    |
| M    |
| W    |
| M    |
| M    |
| M    |
| M    |
| M    |
| W    |
| W    |
| W    |
+------+
15 rows in set (0.00 sec)

mysql> select distinct sex from member;
+------+
| sex  |
+------+
| M    |
| W    |
+------+
2 rows in set (0.00 sec)

```



### 집계함수 _ GROUNP BY

- SUM (컬럼명) : 합계
- AVG (컬럼명) : 평균
- COUNT(컬럼명) : 레코드 개수
- MAX (컬럼명) : 최대값
- MIN (컬럼명) : 최소값
- ROUND (컬럼명, 자릿수) : 소수점 반올림



```
mysql> select sex from member group by sex;
+------+
| sex  |
+------+
| M    |
| W    |
+------+
2 rows in set (0.00 sec)

mysql> select sex, sum(age) from member group by sex;
+------+----------+
| sex  | sum(age) |
+------+----------+
| M    |      373 |
| W    |      190 |
+------+----------+
2 rows in set (0.00 sec)

mysql> select sex, sum(age), avg(age), count(age)  from member group by sex;
+------+----------+----------+------------+
| sex  | sum(age) | avg(age) | count(age) |
+------+----------+----------+------------+
| M    |      373 |  37.3000 |         10 |
| W    |      190 |  38.0000 |          5 |
+------+----------+----------+------------+
2 rows in set (0.00 sec)

mysql> select sex, sum(age), round(avg(age),2), count(age)  from member group by sex;
+------+----------+-------------------+------------+
| sex  | sum(age) | round(avg(age),2) | count(age) |
+------+----------+-------------------+------------+
| M    |      373 |             37.30 |         10 |
| W    |      190 |             38.00 |          5 |
+------+----------+-------------------+------------+
2 rows in set (0.00 sec)

mysql> select sex, sum(age), round(avg(age),2) as'평균나이' , count(age)  from member group by sex;
+------+----------+--------------+------------+
| sex  | sum(age) | 평균나이     | count(age) |
+------+----------+--------------+------------+
| M    |      373 |        37.30 |         10 |
| W    |      190 |        38.00 |          5 |
+------+----------+--------------+------------+
2 rows in set (0.00 sec)

```

```
mysql> select sex, sum(age) from member group by sex having sum(age) > 300;
+------+----------+
| sex  | sum(age) |
+------+----------+
| M    |      373 |
+------+----------+
1 row in set (0.00 sec)

```

### DCL

```
mysql> select host, user, password from mysql.user;
+-----------+------+-------------------------------------------+
| host      | user | password                                  |
+-----------+------+-------------------------------------------+
| localhost | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
| linux-04  | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
| 127.0.0.1 | root | *A4B6157319038724E3560894F7F932C8886EBFCF |
+-----------+------+-------------------------------------------+
3 rows in set (0.00 sec)

```



### 계정정보

- [user]@[host]
  - user : 계정명
  - host : 접근 경로 (클라이언트 주소)
    - 계정명@'%' : 0.0.0.0/0 (전체 네트워크, localhost 제외)
    - 계정명@'100.100.100.%' : 100.100.100.0/24
    - 계정명@'100.100.100.50' : 단일 IP

```
mysql> create user kuser1@localhost;
Query OK, 0 rows affected (0.00 sec)

mysql> select user, host, password from mysql.user; // 근데 이러면 비번은 없음
+--------+-----------+-------------------------------------------+
| user   | host      | password                                  |
+--------+-----------+-------------------------------------------+
| root   | localhost | *A4B6157319038724E3560894F7F932C8886EBFCF |
| root   | linux-04  | *A4B6157319038724E3560894F7F932C8886EBFCF |
| root   | 127.0.0.1 | *A4B6157319038724E3560894F7F932C8886EBFCF |
| kuser1 | localhost |                                           |
+--------+-----------+-------------------------------------------+
4 rows in set (0.00 sec)

비밀번호를 같이 지정하고 만들어주기

mysql> create user kuser2@localhost identified by 'keroro2424.';
Query OK, 0 rows affected (0.00 sec)

mysql> select user, host, password from mysql.user;
+--------+-----------+-------------------------------------------+
| user   | host      | password                                  |
+--------+-----------+-------------------------------------------+
| root   | localhost | *A4B6157319038724E3560894F7F932C8886EBFCF |
| root   | linux-04  | *A4B6157319038724E3560894F7F932C8886EBFCF |
| root   | 127.0.0.1 | *A4B6157319038724E3560894F7F932C8886EBFCF |
| kuser1 | localhost |                                           |
| kuser2 | localhost | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |    // kuser2는 비번 O
+--------+-----------+-------------------------------------------+
5 rows in set (0.00 sec)

```

Create 말고 Insert로도 계정생성 가능

```
mysql> insert into mysql.user (user, host, password)
    -> values ('kuser3', '%', password('qwer1234'));   //%=나를 제외한 모든 
Query OK, 1 row affected, 3 warnings (0.00 sec)

mysql> select user, host, password from mysql.user;
+--------+-----------+-------------------------------------------+
| user   | host      | password                                  |
+--------+-----------+-------------------------------------------+
| root   | localhost | *A4B6157319038724E3560894F7F932C8886EBFCF |
| root   | linux-04  | *A4B6157319038724E3560894F7F932C8886EBFCF |
| root   | 127.0.0.1 | *A4B6157319038724E3560894F7F932C8886EBFCF |
| kuser1 | localhost |                                           |
| kuser2 | localhost | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| kuser3 | %         | *D75CC763C5551A420D28A227AC294FADE26A2FF2 |
+--------+-----------+-------------------------------------------+
6 rows in set (0.00 sec)

```



#### 계정에대한 정보를 변경했으면 갱신을 해주어야한다!

```
mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)

```



터미널 탭 하나 더 열어서 root 가 아닌 kuser1로 접속

```
[root@Linux-04 바탕화면]# mysql -u kuser1
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 16
Server version: 5.1.73 Source distribution

Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |    // 다른 계정 권한이 없어서 안보여
+--------------------+
1 row in set (0.00 sec)
```

이번에는 kuser2로 접속해보기

```
[root@Linux-04 바탕화면]# mysql -u kuser2 -pkeroro2424.
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 17
Server version: 5.1.73 Source distribution

Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
+--------------------+
1 row in set (0.00 sec)

mysql> exit
Bye

```

kuser3 접속 얘는 local host가 아닌 % 라 접근 불가

```
[root@Linux-04 바탕화면]# mysql -u kuser3 -pqwer1234
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 2
Server version: 5.1.73 Source distribution

Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> exit
Bye

-> 원래 접근되면 안됨 ㅠㅠ
```





CentOS 하나 더 풀기 -> WebClient

[root@Linux-04 바탕화면]# yum -y install mysql

[root@Linux-04 바탕화면]# mysql -h 100.100.100.10 -u kuser3 -p
Enter password:              //qwer1234
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 3
Server version: 5.1.73 Source distribution

Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.





### Mysql 계정 비밀번호 찾기

1. 데몬 종료
   #service mysqld stop

2. mysql 안전모드 실행(권한 무시)

   #mysqld_safe --skip-grant & 		->백그라운드로

3. mysql 접속

   #mysql

4. 비밀번호 변경

   update mysql.user set password=password('비밀번호') where user='계정명';

5. 계정정보 

   flush privileges;

6. 데몬 재시작

   #service mysqld restart

   

   ```
   mysql> update mysql.user set password=password('keroro2424.')
       -> where user='root'
       -> ;
   Query OK, 3 rows affected (0.01 sec)
   Rows matched: 3  Changed: 3  Warnings: 0
   exit
   bye
   
   [root@Linux-04 바탕화면]# service mysqld restart
   mysqld 를 정지 중:                                         [  OK  ]
   mysqld (을)를 시작 중:                                     [  OK  ]
   [root@Linux-04 바탕화면]# mysql -u root -pkeroro2424.
   Welcome to the MySQL monitor.  Commands end with ; or \g.
   Your MySQL connection id is 2
   Server version: 5.1.73 Source distribution
   
   Copyright (c) 2000, 2013, Oracle and/or its affiliates. All rights reserved.
   
   Oracle is a registered trademark of Oracle Corporation and/or its
   affiliates. Other names may be trademarks of their respective
   owners.
   
   Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.
   
   mysql> select user, host, password from mysql.user;
   
   ```



### 계정 지우기

```

mysql> delete from mysql.user where user='kuser3';
Query OK, 1 row affected (0.00 sec)

mysql> select user, host, password from mysql.user;
+--------+-----------+-------------------------------------------+
| user   | host      | password                                  |
+--------+-----------+-------------------------------------------+
| root   | localhost | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| root   | linux-04  | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| root   | 127.0.0.1 | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| kuser1 | localhost |                                           |
| kuser2 | localhost | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
+--------+-----------+-------------------------------------------+
5 rows in set (0.00 sec)

mysql> drop user kuser2@localhost;
Query OK, 0 rows affected (0.00 sec)

mysql> select user, host, password from mysql.user;
+--------+-----------+-------------------------------------------+
| user   | host      | password                                  |
+--------+-----------+-------------------------------------------+
| root   | localhost | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| root   | linux-04  | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| root   | 127.0.0.1 | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| kuser1 | localhost |                                           |
+--------+-----------+-------------------------------------------+
4 rows in set (0.00 sec)

mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)

```

[root@Linux-04 바탕화면]# mysql -u kuser1 -p1234

```
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| naver_db           |
+--------------------+
2 rows in set (0.01 sec)

mysql> use naver_db;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed


```



### 권한삭제 (Revoke from)

```
mysql> revoke select(id), insert on naver_db.member
    -> from kuser1@localhost;
Query OK, 0 rows affected (0.00 sec)
```

```
mysql> grant select(id,name) on naver_db.member to kuser1@localhost;
Query OK, 0 rows affected (0.00 sec)

mysql> show grants for kuser1@localhost;
+---------------------------------------------------------------------------------------------------------------+
| Grants for kuser1@localhost                                                                                   |
+---------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'kuser1'@'localhost' IDENTIFIED BY PASSWORD '*A4B6157319038724E3560894F7F932C8886EBFCF' |
| GRANT SELECT (name, id), INSERT ON `naver_db`.`member` TO 'kuser1'@'localhost'                                |
+---------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)


mysql> select user, host, password from user;
+--------+---------------+-------------------------------------------+
| user   | host          | password                                  |
+--------+---------------+-------------------------------------------+
| root   | localhost     | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| root   | linux-04      | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| root   | 127.0.0.1     | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| kuser1 | localhost     | *A4B6157319038724E3560894F7F932C8886EBFCF |
| root   | 100.100.100.% | *A4B6157319038724E3560894F7F932C8886EBFCF |
+--------+---------------+-------------------------------------------+
5 rows in set (0.00 sec)

mysql> revoke select(id), insert on naver_db.member
    -> from kuser1@localhost;
Query OK, 0 rows affected (0.00 sec)

mysql> show grants for kuser1@localhost;
+---------------------------------------------------------------------------------------------------------------+
| Grants for kuser1@localhost                                                                                   |
+---------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'kuser1'@'localhost' IDENTIFIED BY PASSWORD '*A4B6157319038724E3560894F7F932C8886EBFCF' |
| GRANT SELECT (name) ON `naver_db`.`member` TO 'kuser1'@'localhost'                                            |
+---------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> flush privileges;
Query OK, 0 rows affected (0.00 sec)


```



### 실습 SQL

DB : TestDB

Table :

  userTbl

```
  USERID CHAR(8) 널 허용안함, 기본키 -- 사용자 아이디
  NAME VARCHAR(10) 널 허용안함 -- 이름
  BIRTHYEAR INT 널 허용안함 -- 출생 년도
  ADDR CHAR(4) 널 허용안함 -- 지역
  MOBILE1 CHAR(3) -- 휴대폰 국번
  MOBILE2 CHAR(8) -- 휴대폰 나머지 번호
  HEIGHT INT -- 신장
```

  buyTbl

```
  NUM INT 자동증가값 널 허용안함 기본키
  USERID CHAR(8) 널 허용안함 
  PRODNAME CHAR(6) 널 허용안함 -- 물품명
  GROUPNAME CHAR(4) -- 분류
  PRICE INT 널 허용안함 -- 단가
  AMOUNT SMALLINT 널 허용안함 -- 수량
```

Value : 

​    userTbl

```
   'PJS','박지성',1983,'서울','011','1111111',181
    'PJY','박주영',1986,'경기','011','2222222',178
    'JJJ','조재진',1986,'충북','019','3333333',179
    'LCS','이천수',1983,'인천','011','4444444',179
    'AJH','안정환',1979,'강원',NULL , NULL , 182
    'KNI','김남일',1977,'경북','016', 6666666',183
    'LYP','이영표',1983,'전북', NULL , NULL , 178
    'SKH','설기현',1978,'서울','011','8888888',182
    'SJK','송종국',1979,'경기','018','9999999',178
    'CJC','최진철',1975,'제주','019','0000000',185
```

buyTbl

    'PJY', '운동화', NULL, 30, 2
    'PJY', '노트북', '전자', 1000, 1
    'LCS', '모니터', '전자', 200, 1
    'CJC', '노트북', '전자', 200, 5
    'PJY', '청바지', '의류', 50, 3
    'CJC', '메모리', '전자', 80, 10
    'AJH', '책', '서적', 15, 5
    'SKH', '책', '서적', 15, 2
    'SKH', '청바지','의류', 50, 1
    'CJC', '운동화', NULL, 30, 2
    'SKH', '책', '서적', 15, 1
    'CJC', '운동화', NULL, 30, 2

1980년 이 후에 출생하고, 신장이 180 이상인 사람의 아이디와 이름 조회
신장이 180 ~ 183인 사람의 이름과 신장 출력
키순으로 회원들을 출력하되 내림 차순으로 정렬
키순으로 정렬하되 만약 키가 같으면 이름 순으로정렬
회원 테이블에서 회원들의 거주 지역이 몇 군데인지 출력
구매액은 수량 * 단가이므로 총 합 SUM을 사용
전체 구매자가 구매한 물품의 개수(amount)의 평균 출력
그 중에서 총 구매액이 1000 이상인 사용자 출력
구매 테이블에서 현재의 단가에서 모든 단가가 1.5배 인상
계정 testuser1 생성
계정 testuser2 생성
testuser1 계정에게 userTbl에 모든 권한 및 권한 부여 권한 설정
testuser2 계정에게 buyTbl에 select, insert, delete 권한 설정



------------ 답 -----------

메모장에

```
create database TestDB;

use TestDB;

create table userTbl (
userid char(8) not null primary key,
name varchar(10) not null,
birthyear int not null,
addr char(4) not null,
mobile1 char(3),
mobile2 char(8),
height int 
);

create table buyTbl (
num int auto_increment not null primary key,
userid char(8) not null,
prodname char(6) not null,
groupname char(4),
price int not null,
amount smallint not null
);

insert into userTbl values ('PJS','박지성',1983,'서울','011','1111111',181);
insert into userTbl values ('PJY','박주영',1986,'경기','011','2222222',178);
insert into userTbl values ('JJJ','조재진',1986,'충북','019','3333333',179);
insert into userTbl values ('LCS','이천수',1983,'인천','011','4444444',179);
insert into userTbl values ('AJH','안정환',1979,'강원',NULL , NULL , 182);
insert into userTbl values ('KNI','김남일',1977,'경북','016', '6666666',183);
insert into userTbl values ('LYP','이영표',1983,'전북', NULL , NULL , 178);
insert into userTbl values ('SKH','설기현',1978,'서울','011','8888888',182);
insert into userTbl values ('SJK','송종국',1979,'경기','018','9999999',178);
insert into userTbl values ('CJC','최진철',1975,'제주','019','0000000',185);

insert into buyTbl values ('', 'PJY', '운동화', NULL, 30, 2);
insert into buyTbl values ('', 'PJY', '노트북', '전자', 1000, 1);
insert into buyTbl values ('','LCS', '모니터', '전자', 200, 1);
insert into buyTbl values ('','CJC', '노트북', '전자', 200, 5);
insert into buyTbl values ('','PJY', '청바지', '의류', 50, 3);
insert into buyTbl values ('','CJC', '메모리', '전자', 80, 10);
insert into buyTbl values ('','AJH', '책', '서적', 15, 5);
insert into buyTbl values ('','SKH', '책', '서적', 15, 2);
insert into buyTbl values ('','SKH', '청바지','의류', 50, 1);
insert into buyTbl values ('','CJC', '운동화', NULL, 30, 2);
insert into buyTbl values ('','SKH', '책', '서적', 15, 1);
insert into buyTbl values ('','CJC', '운동화', NULL, 30, 2);


 
 
-> test.sql 저장 [모든파일형식, 인코딩방식 = utf-8]
```

WebMail 와서

[root@Linux-04 바탕화면]# mysql -u root -pkeroro2424. < test.sql
[root@Linux-04 바탕화면]# mysql -u root -pkeroro2424.

```
mysql> use TestDB;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+------------------+
| Tables_in_TestDB |
+------------------+
| buyTbl           |
| userTbl          |
+------------------+
2 rows in set (0.00 sec)

mysql> select * from userTbl;
+--------+-----------+-----------+--------+---------+---------+--------+
| userid | name      | birthyear | addr   | mobile1 | mobile2 | height |
+--------+-----------+-----------+--------+---------+---------+--------+
| PJS    | 박지성    |      1983 | 서울   | 011     | 1111111 |    181 |
| PJY    | 박주영    |      1986 | 경기   | 011     | 2222222 |    178 |
| JJJ    | 조재진    |      1986 | 충북   | 019     | 3333333 |    179 |
| LCS    | 이천수    |      1983 | 인천   | 011     | 4444444 |    179 |
| AJH    | 안정환    |      1979 | 강원   | NULL    | NULL    |    182 |
| KNI    | 김남일    |      1977 | 경북   | 016     | 6666666 |    183 |
| LYP    | 이영표    |      1983 | 전북   | NULL    | NULL    |    178 |
| SKH    | 설기현    |      1978 | 서울   | 011     | 8888888 |    182 |
| SJK    | 송종국    |      1979 | 경기   | 018     | 9999999 |    178 |
| CJC    | 최진철    |      1975 | 제주   | 019     | 0000000 |    185 |
+--------+-----------+-----------+--------+---------+---------+--------+
10 rows in set (0.00 sec)

mysql> select * from buyTbl;
+-----+--------+-----------+-----------+-------+--------+
| num | userid | prodname  | groupname | price | amount |
+-----+--------+-----------+-----------+-------+--------+
|   1 | PJY    | 운동화    | NULL      |    30 |      2 |
|   2 | PJY    | 노트북    | 전자      |  1000 |      1 |
|   3 | LCS    | 모니터    | 전자      |   200 |      1 |
|   4 | CJC    | 노트북    | 전자      |   200 |      5 |
|   5 | PJY    | 청바지    | 의류      |    50 |      3 |
|   6 | CJC    | 메모리    | 전자      |    80 |     10 |
|   7 | AJH    | 책        | 서적      |    15 |      5 |
|   8 | SKH    | 책        | 서적      |    15 |      2 |
|   9 | SKH    | 청바지    | 의류      |    50 |      1 |
|  10 | CJC    | 운동화    | NULL      |    30 |      2 |
|  11 | SKH    | 책        | 서적      |    15 |      1 |
|  12 | CJC    | 운동화    | NULL      |    30 |      2 |
+-----+--------+-----------+-----------+-------+--------+
12 rows in set (0.00 sec)

```



-------------------

1980년 이 후에 출생하고, 신장이 180 이상인 사람의 아이디와 이름 조회

```
mysql> select userid,name from userTbl
    -> where birthyear >= 1980 and height >= 180;
+--------+-----------+
| userid | name      |
+--------+-----------+
| PJS    | 박지성    |
+--------+-----------+
1 row in set (0.00 sec)

```

신장이 180 ~ 183인 사람의 이름과 신장 출력

```
mysql> select name, height from userTbl
    -> where height between 180 and 183;
+-----------+--------+
| name      | height |
+-----------+--------+
| 박지성    |    181 |
| 안정환    |    182 |
| 김남일    |    183 |
| 설기현    |    182 |
+-----------+--------+
4 rows in set (0.00 sec)

```

키순으로 회원들을 출력하되 내림 차순으로 정렬

```
mysql> select * from userTbl order by height desc;
+--------+-----------+-----------+--------+---------+---------+--------+
| userid | name      | birthyear | addr   | mobile1 | mobile2 | height |
+--------+-----------+-----------+--------+---------+---------+--------+
| CJC    | 최진철    |      1975 | 제주   | 019     | 0000000 |    185 |
| KNI    | 김남일    |      1977 | 경북   | 016     | 6666666 |    183 |
| AJH    | 안정환    |      1979 | 강원   | NULL    | NULL    |    182 |
| SKH    | 설기현    |      1978 | 서울   | 011     | 8888888 |    182 |
| PJS    | 박지성    |      1983 | 서울   | 011     | 1111111 |    181 |
| JJJ    | 조재진    |      1986 | 충북   | 019     | 3333333 |    179 |
| LCS    | 이천수    |      1983 | 인천   | 011     | 4444444 |    179 |
| PJY    | 박주영    |      1986 | 경기   | 011     | 2222222 |    178 |
| LYP    | 이영표    |      1983 | 전북   | NULL    | NULL    |    178 |
| SJK    | 송종국    |      1979 | 경기   | 018     | 9999999 |    178 |
+--------+-----------+-----------+--------+---------+---------+--------+
10 rows in set (0.00 sec)


```

키순으로 정렬하되 만약 키가 같으면 이름 순으로정렬

```
mysql> select * from userTbl order by height desc, name asc;
+--------+-----------+-----------+--------+---------+---------+--------+
| userid | name      | birthyear | addr   | mobile1 | mobile2 | height |
+--------+-----------+-----------+--------+---------+---------+--------+
| CJC    | 최진철    |      1975 | 제주   | 019     | 0000000 |    185 |
| KNI    | 김남일    |      1977 | 경북   | 016     | 6666666 |    183 |
| SKH    | 설기현    |      1978 | 서울   | 011     | 8888888 |    182 |
| AJH    | 안정환    |      1979 | 강원   | NULL    | NULL    |    182 |
| PJS    | 박지성    |      1983 | 서울   | 011     | 1111111 |    181 |
| LCS    | 이천수    |      1983 | 인천   | 011     | 4444444 |    179 |
| JJJ    | 조재진    |      1986 | 충북   | 019     | 3333333 |    179 |
| PJY    | 박주영    |      1986 | 경기   | 011     | 2222222 |    178 |
| SJK    | 송종국    |      1979 | 경기   | 018     | 9999999 |    178 |
| LYP    | 이영표    |      1983 | 전북   | NULL    | NULL    |    178 |
+--------+-----------+-----------+--------+---------+---------+--------+
10 rows in set (0.00 sec)


```

회원 테이블에서 회원들의 거주 지역이 몇 군데인지 출력

```
mysql> select * from userTbl;
+--------+-----------+-----------+--------+---------+---------+--------+
| userid | name      | birthyear | addr   | mobile1 | mobile2 | height |
+--------+-----------+-----------+--------+---------+---------+--------+
| PJS    | 박지성    |      1983 | 서울   | 011     | 1111111 |    181 |
| PJY    | 박주영    |      1986 | 경기   | 011     | 2222222 |    178 |
| JJJ    | 조재진    |      1986 | 충북   | 019     | 3333333 |    179 |
| LCS    | 이천수    |      1983 | 인천   | 011     | 4444444 |    179 |
| AJH    | 안정환    |      1979 | 강원   | NULL    | NULL    |    182 |
| KNI    | 김남일    |      1977 | 경북   | 016     | 6666666 |    183 |
| LYP    | 이영표    |      1983 | 전북   | NULL    | NULL    |    178 |
| SKH    | 설기현    |      1978 | 서울   | 011     | 8888888 |    182 |
| SJK    | 송종국    |      1979 | 경기   | 018     | 9999999 |    178 |
| CJC    | 최진철    |      1975 | 제주   | 019     | 0000000 |    185 |
+--------+-----------+-----------+--------+---------+---------+--------+
10 rows in set (0.00 sec)

mysql> select distinct addr from userTbl;
+--------+
| addr   |
+--------+
| 서울   |
| 경기   |
| 충북   |
| 인천   |
| 강원   |
| 경북   |
| 전북   |
| 제주   |
+--------+
8 rows in set (0.00 sec)

mysql> select addr, count(userid) from userTbl group by addr;
+--------+---------------+
| addr   | count(userid) |
+--------+---------------+
| 강원   |             1 |
| 경기   |             2 |
| 경북   |             1 |
| 서울   |             2 |
| 인천   |             1 |
| 전북   |             1 |
| 제주   |             1 |
| 충북   |             1 |
+--------+---------------+
8 rows in set (0.00 sec)

```

구매액은 수량 * 단가이므로 총 합 SUM을 사용

```
mysql> select userid, sum(price * amount) as '구매액' from buyTbl
    -> group by userid;
+--------+-----------+
| userid | 구매액    |
+--------+-----------+
| AJH    |        75 |
| CJC    |      1920 |
| LCS    |       200 |
| PJY    |      1210 |
| SKH    |        95 |
+--------+-----------+
5 rows in set (0.00 sec)

```

전체 구매자가 구매한 물품의 개수(amount)의 평균 출력

```
mysql> select userid, avg(amount) as "구매 수량 평균" from buyTbl group by userid;
+--------+----------------------+
| userid | 구매 수량 평균       |
+--------+----------------------+
| AJH    |               5.0000 |
| CJC    |               4.7500 |
| LCS    |               1.0000 |
| PJY    |               2.0000 |
| SKH    |               1.3333 |
+--------+----------------------+
5 rows in set (0.00 sec)


```

그 중에서 총 구매액이 1000 이상인 사용자 출력

```
mysql> select userid, sum(price * amount) as '구매액' from buyTbl
    -> group by userid having 구매액 >= 1000;
+--------+-----------+
| userid | 구매액    |
+--------+-----------+
| CJC    |      1920 |
| PJY    |      1210 |
+--------+-----------+
2 rows in set (0.00 sec)

```

구매 테이블에서 현재의 단가에서 모든 단가가 1.5배 인상

```
mysql> select * from buyTbl;
+-----+--------+-----------+-----------+-------+--------+
| num | userid | prodname  | groupname | price | amount |
+-----+--------+-----------+-----------+-------+--------+
|   1 | PJY    | 운동화    | NULL      |    30 |      2 |
|   2 | PJY    | 노트북    | 전자      |  1000 |      1 |
|   3 | LCS    | 모니터    | 전자      |   200 |      1 |
|   4 | CJC    | 노트북    | 전자      |   200 |      5 |
|   5 | PJY    | 청바지    | 의류      |    50 |      3 |
|   6 | CJC    | 메모리    | 전자      |    80 |     10 |
|   7 | AJH    | 책        | 서적      |    15 |      5 |
|   8 | SKH    | 책        | 서적      |    15 |      2 |
|   9 | SKH    | 청바지    | 의류      |    50 |      1 |
|  10 | CJC    | 운동화    | NULL      |    30 |      2 |
|  11 | SKH    | 책        | 서적      |    15 |      1 |
|  12 | CJC    | 운동화    | NULL      |    30 |      2 |
+-----+--------+-----------+-----------+-------+--------+
12 rows in set (0.00 sec)

mysql> update buyTbl set price = price * 1.5;
Query OK, 12 rows affected (0.00 sec)
Rows matched: 12  Changed: 12  Warnings: 0

mysql> select * from buyTbl;
+-----+--------+-----------+-----------+-------+--------+
| num | userid | prodname  | groupname | price | amount |
+-----+--------+-----------+-----------+-------+--------+
|   1 | PJY    | 운동화    | NULL      |    45 |      2 |
|   2 | PJY    | 노트북    | 전자      |  1500 |      1 |
|   3 | LCS    | 모니터    | 전자      |   300 |      1 |
|   4 | CJC    | 노트북    | 전자      |   300 |      5 |
|   5 | PJY    | 청바지    | 의류      |    75 |      3 |
|   6 | CJC    | 메모리    | 전자      |   120 |     10 |
|   7 | AJH    | 책        | 서적      |    23 |      5 |
|   8 | SKH    | 책        | 서적      |    23 |      2 |
|   9 | SKH    | 청바지    | 의류      |    75 |      1 |
|  10 | CJC    | 운동화    | NULL      |    45 |      2 |
|  11 | SKH    | 책        | 서적      |    23 |      1 |
|  12 | CJC    | 운동화    | NULL      |    45 |      2 |
+-----+--------+-----------+-----------+-------+--------+
12 rows in set (0.00 sec)

```

계정 testuser1 생성

계정 testuser2 생성

```
mysql> create user testuser1@localhost;
Query OK, 0 rows affected (0.00 sec)

mysql> create user testuser2@localhost;
Query OK, 0 rows affected (0.00 sec)

mysql> select user, host, password from mysql.user;
+-----------+---------------+-------------------------------------------+
| user      | host          | password                                  |
+-----------+---------------+-------------------------------------------+
| root      | localhost     | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| root      | linux-04      | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| root      | 127.0.0.1     | *A849201DB02204C54339B1AF6F0E3BEF14EE74BC |
| kuser1    | localhost     | *A4B6157319038724E3560894F7F932C8886EBFCF |
| root      | 100.100.100.% | *A4B6157319038724E3560894F7F932C8886EBFCF |
| testuser1 | localhost     |                                           |
| testuser2 | localhost     |                                           |
+-----------+---------------+-------------------------------------------+
7 rows in set (0.00 sec)

```

testuser1 계정에게 userTbl에 모든 권한 및 권한 부여 권한 설정

```
mysql> grant all privileges on TestDB.userTbl
    -> to testuser1@localhost identified by 'keroro2424.' with grant option;
Query OK, 0 rows affected (0.00 sec)

mysql> show grants for testuser1@localhost;
+------------------------------------------------------------------------------------------------------------------+
| Grants for testuser1@localhost                                                                                   |
+------------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'testuser1'@'localhost' IDENTIFIED BY PASSWORD '*A849201DB02204C54339B1AF6F0E3BEF14EE74BC' |
| GRANT ALL PRIVILEGES ON `TestDB`.`userTbl` TO 'testuser1'@'localhost' WITH GRANT OPTION                          |
+------------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)


```

testuser2 계정에게 buyTbl에 select, insert, delete 권한 설정

```
mysql> grant select, insert, delete on TestDB.buyTbl 
    -> to testuser2@localhost identified by 'keroro2424.';
Query OK, 0 rows affected (0.00 sec)

mysql> show grants for testuser2@localhost;
+------------------------------------------------------------------------------------------------------------------+
| Grants for testuser2@localhost                                                                                   |
+------------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'testuser2'@'localhost' IDENTIFIED BY PASSWORD '*A849201DB02204C54339B1AF6F0E3BEF14EE74BC' |
| GRANT SELECT, INSERT, DELETE ON `TestDB`.`buyTbl` TO 'testuser2'@'localhost'                                     |
+------------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

```



### 데이터사전_86p 스키마

```
mysql> use information_schema;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+---------------------------------------+
| Tables_in_information_schema          |
+---------------------------------------+
| CHARACTER_SETS                        |
| COLLATIONS                            |
| COLLATION_CHARACTER_SET_APPLICABILITY |
| COLUMNS                               | //Columns= Column 에 대한 정보를 갖고있는
| COLUMN_PRIVILEGES                     |
| ENGINES                               |
| EVENTS                                |
| FILES                                 |
| GLOBAL_STATUS                         |
| GLOBAL_VARIABLES                      |
| KEY_COLUMN_USAGE                      |
| PARTITIONS                            |
| PLUGINS                               |
| PROCESSLIST                           |
| PROFILING                             |
| REFERENTIAL_CONSTRAINTS               |
| ROUTINES                              |
| SCHEMATA                              |
| SCHEMA_PRIVILEGES                     |
| SESSION_STATUS                        |
| SESSION_VARIABLES                     |
| STATISTICS                            |
| TABLES                                | //Tables = Table에 대한 정보를 갖고있다.
| TABLE_CONSTRAINTS                     |
| TABLE_PRIVILEGES                      |
| TRIGGERS                              |
| USER_PRIVILEGES                       |
| VIEWS                                 |
+---------------------------------------+
28 rows in set (0.00 sec)

-> Columns, Tables 많이 쓸거임!!

```

```
mysql> desc tables;
+-----------------+---------------------+------+-----+---------+-------+
| Field           | Type                | Null | Key | Default | Extra |
+-----------------+---------------------+------+-----+---------+-------+
| TABLE_CATALOG   | varchar(512)        | YES  |     | NULL    |       |
| TABLE_SCHEMA    | varchar(64)         | NO   |     |         |       |   //테이블이 속한 DB 이름
| TABLE_NAME      | varchar(64)         | NO   |     |         |       |
| TABLE_TYPE      | varchar(64)         | NO   |     |         |       |
| ENGINE          | varchar(64)         | YES  |     | NULL    |       |
| VERSION         | bigint(21) unsigned | YES  |     | NULL    |       |
| ROW_FORMAT      | varchar(10)         | YES  |     | NULL    |       |
| TABLE_ROWS      | bigint(21) unsigned | YES  |     | NULL    |       | 
| AVG_ROW_LENGTH  | bigint(21) unsigned | YES  |     | NULL    |       |
| DATA_LENGTH     | bigint(21) unsigned | YES  |     | NULL    |       |
| MAX_DATA_LENGTH | bigint(21) unsigned | YES  |     | NULL    |       |
| INDEX_LENGTH    | bigint(21) unsigned | YES  |     | NULL    |       |
| DATA_FREE       | bigint(21) unsigned | YES  |     | NULL    |       |
| AUTO_INCREMENT  | bigint(21) unsigned | YES  |     | NULL    |       |
| CREATE_TIME     | datetime            | YES  |     | NULL    |       |
| UPDATE_TIME     | datetime            | YES  |     | NULL    |       |
| CHECK_TIME      | datetime            | YES  |     | NULL    |       |
| TABLE_COLLATION | varchar(32)         | YES  |     | NULL    |       |
| CHECKSUM        | bigint(21) unsigned | YES  |     | NULL    |       |
| CREATE_OPTIONS  | varchar(255)        | YES  |     | NULL    |       |
| TABLE_COMMENT   | varchar(80)         | NO   |     |         |       |
+-----------------+---------------------+------+-----+---------+-------+
21 rows in set (0.00 sec)



```

정보가 보고 싶어

```
mysql> select table_schema, table_name from tables;
+--------------------+---------------------------------------+
| table_schema       | table_name                            |
+--------------------+---------------------------------------+
| information_schema | CHARACTER_SETS                        |
| information_schema | COLLATIONS                            |
| information_schema | COLLATION_CHARACTER_SET_APPLICABILITY |
| information_schema | COLUMNS                               |
| information_schema | COLUMN_PRIVILEGES                     |
| information_schema | ENGINES                               |
| information_schema | EVENTS                                |
| information_schema | FILES                                 |
| information_schema | GLOBAL_STATUS                         |
| information_schema | GLOBAL_VARIABLES                      |
| information_schema | KEY_COLUMN_USAGE                      |
| information_schema | PARTITIONS                            |
| information_schema | PLUGINS                               |
| information_schema | PROCESSLIST                           |
| information_schema | PROFILING                             |
| information_schema | REFERENTIAL_CONSTRAINTS               |
| information_schema | ROUTINES                              |
| information_schema | SCHEMATA                              |
| information_schema | SCHEMA_PRIVILEGES                     |
| information_schema | SESSION_STATUS                        |
| information_schema | SESSION_VARIABLES                     |
| information_schema | STATISTICS                            |
| information_schema | TABLES                                |
| information_schema | TABLE_CONSTRAINTS                     |
| information_schema | TABLE_PRIVILEGES                      |
| information_schema | TRIGGERS                              |
| information_schema | USER_PRIVILEGES                       |
| information_schema | VIEWS                                 |
| TestDB             | buyTbl                                |
| TestDB             | userTbl                               |
| khacademy          | freeboard                             |
| khacademy          | kh_mem                                |
| mysql              | columns_priv                          |
| mysql              | db                                    |
| mysql              | event                                 |
| mysql              | func                                  |
| mysql              | general_log                           |
| mysql              | help_category                         |
| mysql              | help_keyword                          |
| mysql              | help_relation                         |
| mysql              | help_topic                            |
| mysql              | host                                  |
| mysql              | ndb_binlog_index                      |
| mysql              | plugin                                |
| mysql              | proc                                  |
| mysql              | procs_priv                            |
| mysql              | servers                               |
| mysql              | slow_log                              |
| mysql              | tables_priv                           |
| mysql              | time_zone                             |
| mysql              | time_zone_leap_second                 |
| mysql              | time_zone_name                        |
| mysql              | time_zone_transition                  |
| mysql              | time_zone_transition_type             |
| mysql              | user                                  |
| naver_db           | member                                |
+--------------------+---------------------------------------+
56 rows in set (0.00 sec)

```

특정 테이블만 보고싶어

```
mysql> select table_schema, table_name from tables
    -> where table_schema='khacademy';
+--------------+------------+
| table_schema | table_name |
+--------------+------------+
| khacademy    | freeboard  |
| khacademy    | kh_mem     |
+--------------+------------+
2 rows in set (0.00 sec)

mysql> select table_name, column_name from columns
    -> where table_name='freeboard';
+------------+-------------+
| table_name | column_name |
+------------+-------------+
| freeboard  | num         |
| freeboard  | name        |
| freeboard  | passwd      |
| freeboard  | subject     |
| freeboard  | content     |
| freeboard  | reg_date    |
| freeboard  | ip          |
+------------+-------------+
7 rows in set (0.00 sec)



```

WebMail_kuser1 터미널에서 

```
mysql> show grants;
+---------------------------------------------------------------------------------------------------------------+
| Grants for kuser1@localhost                                                                                   |
+---------------------------------------------------------------------------------------------------------------+
| GRANT USAGE ON *.* TO 'kuser1'@'localhost' IDENTIFIED BY PASSWORD '*A4B6157319038724E3560894F7F932C8886EBFCF' |
| GRANT SELECT (name) ON `naver_db`.`member` TO 'kuser1'@'localhost'                                            |
+---------------------------------------------------------------------------------------------------------------+
2 rows in set (0.00 sec)

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| naver_db           |
+--------------------+
2 rows in set (0.00 sec)

mysql> select table_schema, table_name from information_schema.tables
    -> where table_schema='TestDB';
Empty set (0.00 sec)

mysql> select table_schema, table_name from information_schema.tables where table_schema='khacademy';
Empty set (0.00 sec)

mysql> select table_schema, table_name from information_schema.tables where table_schema='naver_db';
+--------------+------------+
| table_schema | table_name |
+--------------+------------+
| naver_db     | member     |
+--------------+------------+
1 row in set (0.00 sec)

```

###  기본인코딩 확인 89p

```
mysql> status;
--------------
mysql  Ver 14.14 Distrib 5.1.73, for redhat-linux-gnu (x86_64) using readline 5.1

Connection id:		13
Current database:	information_schema
Current user:		root@localhost
SSL:			Not in use
Current pager:		stdout
Using outfile:		''
Using delimiter:	;
Server version:		5.1.73 Source distribution
Protocol version:	10
Connection:		Localhost via UNIX socket
Server characterset:	utf8
Db     characterset:	utf8
Client characterset:	utf8
Conn.  characterset:	utf8
UNIX socket:		/var/lib/mysql/mysql.sock
Uptime:			2 hours 47 min 31 sec

Threads: 3  Questions: 215  Slow queries: 0  Opens: 36  Flush tables: 1  Open tables: 26  Queries per second avg: 0.21
--------------

```

####  90p

```
mysql> show variables like 'c%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+ 
| character_set_client     | utf8                       | /여기 우리가 다 utf8로 바꿔줬음
| character_set_connection | utf8                       | /여기
| character_set_database   | utf8                       | /여기
| character_set_filesystem | binary                     |
| character_set_results    | utf8                       | /여기
| character_set_server     | utf8                       | /여기
| character_set_system     | utf8                       | /여기
| character_sets_dir       | /usr/share/mysql/charsets/ |
| collation_connection     | utf8_general_ci            | /여기
| collation_database       | utf8_general_ci            | /여기
| collation_server         | utf8_general_ci            | /여기
| completion_type          | 0                          |
| concurrent_insert        | 1                          |
| connect_timeout          | 10                         |
+--------------------------+----------------------------+
14 rows in set (0.00 sec)


```



### 문자셋(Character set)

: 특정 문자가 컴퓨터에 저장될 때 어떠한 코드로 인코딩 되어 저장될 것인지에 대한 규칙이 정의되어 있는 집합

대표코드

- ASCII [한글자 - ]
- 한글지원 EUC-KR
- UTF-8 등등 



### 콜레이션(Collation)



```
mysql> show character set;
+----------+-----------------------------+---------------------+--------+
| Charset  | Description                 | Default collation   | Maxlen |
+----------+-----------------------------+---------------------+--------+
| big5     | Big5 Traditional Chinese    | big5_chinese_ci     |      2 |
| dec8     | DEC West European           | dec8_swedish_ci     |      1 |
| cp850    | DOS West European           | cp850_general_ci    |      1 |
| hp8      | HP West European            | hp8_english_ci      |      1 |
| koi8r    | KOI8-R Relcom Russian       | koi8r_general_ci    |      1 |
| latin1   | cp1252 West European        | latin1_swedish_ci   |      1 |
| latin2   | ISO 8859-2 Central European | latin2_general_ci   |      1 |
| swe7     | 7bit Swedish                | swe7_swedish_ci     |      1 |
| ascii    | US ASCII                    | ascii_general_ci    |      1 |
| ujis     | EUC-JP Japanese             | ujis_japanese_ci    |      3 |
| sjis     | Shift-JIS Japanese          | sjis_japanese_ci    |      2 |
| hebrew   | ISO 8859-8 Hebrew           | hebrew_general_ci   |      1 |
| tis620   | TIS620 Thai                 | tis620_thai_ci      |      1 |
| euckr    | EUC-KR Korean               | euckr_korean_ci     |      2 |
| koi8u    | KOI8-U Ukrainian            | koi8u_general_ci    |      1 |
| gb2312   | GB2312 Simplified Chinese   | gb2312_chinese_ci   |      2 |
| greek    | ISO 8859-7 Greek            | greek_general_ci    |      1 |
| cp1250   | Windows Central European    | cp1250_general_ci   |      1 |
| gbk      | GBK Simplified Chinese      | gbk_chinese_ci      |      2 |
| latin5   | ISO 8859-9 Turkish          | latin5_turkish_ci   |      1 |
| armscii8 | ARMSCII-8 Armenian          | armscii8_general_ci |      1 |
| utf8     | UTF-8 Unicode               | utf8_general_ci     |      3 |
| ucs2     | UCS-2 Unicode               | ucs2_general_ci     |      2 |
| cp866    | DOS Russian                 | cp866_general_ci    |      1 |
| keybcs2  | DOS Kamenicky Czech-Slovak  | keybcs2_general_ci  |      1 |
| macce    | Mac Central European        | macce_general_ci    |      1 |
| macroman | Mac West European           | macroman_general_ci |      1 |
| cp852    | DOS Central European        | cp852_general_ci    |      1 |
| latin7   | ISO 8859-13 Baltic          | latin7_general_ci   |      1 |
| cp1251   | Windows Cyrillic            | cp1251_general_ci   |      1 |
| cp1256   | Windows Arabic              | cp1256_general_ci   |      1 |
| cp1257   | Windows Baltic              | cp1257_general_ci   |      1 |
| binary   | Binary pseudo charset       | binary              |      1 |
| geostd8  | GEOSTD8 Georgian            | geostd8_general_ci  |      1 |
| cp932    | SJIS for Windows Japanese   | cp932_japanese_ci   |      2 |
| eucjpms  | UJIS for Windows Japanese   | eucjpms_japanese_ci |      3 |
+----------+-----------------------------+---------------------+--------+
36 rows in set (0.00 sec)

mysql> show collation;
+--------------------------+----------+-----+---------+----------+---------+
| Collation                | Charset  | Id  | Default | Compiled | Sortlen |
+--------------------------+----------+-----+---------+----------+---------+
| big5_chinese_ci          | big5     |   1 | Yes     | Yes      |       1 |
| big5_bin                 | big5     |  84 |         | Yes      |       1 |
| dec8_swedish_ci          | dec8     |   3 | Yes     | Yes      |       1 |
| dec8_bin                 | dec8     |  69 |         | Yes      |       1 |
| cp850_general_ci         | cp850    |   4 | Yes     | Yes      |       1 |
| cp850_bin                | cp850    |  80 |         | Yes      |       1 |
| hp8_english_ci           | hp8      |   6 | Yes     | Yes      |       1 |
| hp8_bin                  | hp8      |  72 |         | Yes      |       1 |
| koi8r_general_ci         | koi8r    |   7 | Yes     | Yes      |       1 |
| koi8r_bin                | koi8r    |  74 |         | Yes      |       1 |
| latin1_german1_ci        | latin1   |   5 |         | Yes      |       1 |
| latin1_swedish_ci        | latin1   |   8 | Yes     | Yes      |       1 |
| latin1_danish_ci         | latin1   |  15 |         | Yes      |       1 |
| latin1_german2_ci        | latin1   |  31 |         | Yes      |       2 |
| latin1_bin               | latin1   |  47 |         | Yes      |       1 |
| latin1_general_ci        | latin1   |  48 |         | Yes      |       1 |
| latin1_general_cs        | latin1   |  49 |         | Yes      |       1 |
| latin1_spanish_ci        | latin1   |  94 |         | Yes      |       1 |
| latin2_czech_cs          | latin2   |   2 |         | Yes      |       4 |
| latin2_general_ci        | latin2   |   9 | Yes     | Yes      |       1 |
| latin2_hungarian_ci      | latin2   |  21 |         | Yes      |       1 |
| latin2_croatian_ci       | latin2   |  27 |         | Yes      |       1 |
| latin2_bin               | latin2   |  77 |         | Yes      |       1 |
| swe7_swedish_ci          | swe7     |  10 | Yes     | Yes      |       1 |
| swe7_bin                 | swe7     |  82 |         | Yes      |       1 |
| ascii_general_ci         | ascii    |  11 | Yes     | Yes      |       1 |
| ascii_bin                | ascii    |  65 |         | Yes      |       1 |
| ujis_japanese_ci         | ujis     |  12 | Yes     | Yes      |       1 |
| ujis_bin                 | ujis     |  91 |         | Yes      |       1 |
| sjis_japanese_ci         | sjis     |  13 | Yes     | Yes      |       1 |
| sjis_bin                 | sjis     |  88 |         | Yes      |       1 |
| hebrew_general_ci        | hebrew   |  16 | Yes     | Yes      |       1 |
| hebrew_bin               | hebrew   |  71 |         | Yes      |       1 |
| tis620_thai_ci           | tis620   |  18 | Yes     | Yes      |       4 |
| tis620_bin               | tis620   |  89 |         | Yes      |       1 |
| euckr_korean_ci          | euckr    |  19 | Yes     | Yes      |       1 |
| euckr_bin                | euckr    |  85 |         | Yes      |       1 |
| koi8u_general_ci         | koi8u    |  22 | Yes     | Yes      |       1 |
| koi8u_bin                | koi8u    |  75 |         | Yes      |       1 |
| gb2312_chinese_ci        | gb2312   |  24 | Yes     | Yes      |       1 |
| gb2312_bin               | gb2312   |  86 |         | Yes      |       1 |
| greek_general_ci         | greek    |  25 | Yes     | Yes      |       1 |
| greek_bin                | greek    |  70 |         | Yes      |       1 |
| cp1250_general_ci        | cp1250   |  26 | Yes     | Yes      |       1 |
| cp1250_czech_cs          | cp1250   |  34 |         | Yes      |       2 |
| cp1250_croatian_ci       | cp1250   |  44 |         | Yes      |       1 |
| cp1250_bin               | cp1250   |  66 |         | Yes      |       1 |
| cp1250_polish_ci         | cp1250   |  99 |         | Yes      |       1 |
| gbk_chinese_ci           | gbk      |  28 | Yes     | Yes      |       1 |
| gbk_bin                  | gbk      |  87 |         | Yes      |       1 |
| latin5_turkish_ci        | latin5   |  30 | Yes     | Yes      |       1 |
| latin5_bin               | latin5   |  78 |         | Yes      |       1 |
| armscii8_general_ci      | armscii8 |  32 | Yes     | Yes      |       1 |
| armscii8_bin             | armscii8 |  64 |         | Yes      |       1 |
| utf8_general_ci          | utf8     |  33 | Yes     | Yes      |       1 |
| utf8_bin                 | utf8     |  83 |         | Yes      |       1 |
| utf8_unicode_ci          | utf8     | 192 |         | Yes      |       8 |
| utf8_icelandic_ci        | utf8     | 193 |         | Yes      |       8 |
| utf8_latvian_ci          | utf8     | 194 |         | Yes      |       8 |
| utf8_romanian_ci         | utf8     | 195 |         | Yes      |       8 |
| utf8_slovenian_ci        | utf8     | 196 |         | Yes      |       8 |
| utf8_polish_ci           | utf8     | 197 |         | Yes      |       8 |
| utf8_estonian_ci         | utf8     | 198 |         | Yes      |       8 |
| utf8_spanish_ci          | utf8     | 199 |         | Yes      |       8 |
| utf8_swedish_ci          | utf8     | 200 |         | Yes      |       8 |
| utf8_turkish_ci          | utf8     | 201 |         | Yes      |       8 |
| utf8_czech_ci            | utf8     | 202 |         | Yes      |       8 |
| utf8_danish_ci           | utf8     | 203 |         | Yes      |       8 |
| utf8_lithuanian_ci       | utf8     | 204 |         | Yes      |       8 |
| utf8_slovak_ci           | utf8     | 205 |         | Yes      |       8 |
| utf8_spanish2_ci         | utf8     | 206 |         | Yes      |       8 |
| utf8_roman_ci            | utf8     | 207 |         | Yes      |       8 |
| utf8_persian_ci          | utf8     | 208 |         | Yes      |       8 |
| utf8_esperanto_ci        | utf8     | 209 |         | Yes      |       8 |
| utf8_hungarian_ci        | utf8     | 210 |         | Yes      |       8 |
| utf8_general_mysql500_ci | utf8     | 223 |         | Yes      |       1 |
| ucs2_general_ci          | ucs2     |  35 | Yes     | Yes      |       1 |
| ucs2_bin                 | ucs2     |  90 |         | Yes      |       1 |
| ucs2_unicode_ci          | ucs2     | 128 |         | Yes      |       8 |
| ucs2_icelandic_ci        | ucs2     | 129 |         | Yes      |       8 |
| ucs2_latvian_ci          | ucs2     | 130 |         | Yes      |       8 |
| ucs2_romanian_ci         | ucs2     | 131 |         | Yes      |       8 |
| ucs2_slovenian_ci        | ucs2     | 132 |         | Yes      |       8 |
| ucs2_polish_ci           | ucs2     | 133 |         | Yes      |       8 |
| ucs2_estonian_ci         | ucs2     | 134 |         | Yes      |       8 |
| ucs2_spanish_ci          | ucs2     | 135 |         | Yes      |       8 |
| ucs2_swedish_ci          | ucs2     | 136 |         | Yes      |       8 |
| ucs2_turkish_ci          | ucs2     | 137 |         | Yes      |       8 |
| ucs2_czech_ci            | ucs2     | 138 |         | Yes      |       8 |
| ucs2_danish_ci           | ucs2     | 139 |         | Yes      |       8 |
| ucs2_lithuanian_ci       | ucs2     | 140 |         | Yes      |       8 |
| ucs2_slovak_ci           | ucs2     | 141 |         | Yes      |       8 |
| ucs2_spanish2_ci         | ucs2     | 142 |         | Yes      |       8 |
| ucs2_roman_ci            | ucs2     | 143 |         | Yes      |       8 |
| ucs2_persian_ci          | ucs2     | 144 |         | Yes      |       8 |
| ucs2_esperanto_ci        | ucs2     | 145 |         | Yes      |       8 |
| ucs2_hungarian_ci        | ucs2     | 146 |         | Yes      |       8 |
| ucs2_general_mysql500_ci | ucs2     | 159 |         | Yes      |       1 |
| cp866_general_ci         | cp866    |  36 | Yes     | Yes      |       1 |
| cp866_bin                | cp866    |  68 |         | Yes      |       1 |
| keybcs2_general_ci       | keybcs2  |  37 | Yes     | Yes      |       1 |
| keybcs2_bin              | keybcs2  |  73 |         | Yes      |       1 |
| macce_general_ci         | macce    |  38 | Yes     | Yes      |       1 |
| macce_bin                | macce    |  43 |         | Yes      |       1 |
| macroman_general_ci      | macroman |  39 | Yes     | Yes      |       1 |
| macroman_bin             | macroman |  53 |         | Yes      |       1 |
| cp852_general_ci         | cp852    |  40 | Yes     | Yes      |       1 |
| cp852_bin                | cp852    |  81 |         | Yes      |       1 |
| latin7_estonian_cs       | latin7   |  20 |         | Yes      |       1 |
| latin7_general_ci        | latin7   |  41 | Yes     | Yes      |       1 |
| latin7_general_cs        | latin7   |  42 |         | Yes      |       1 |
| latin7_bin               | latin7   |  79 |         | Yes      |       1 |
| cp1251_bulgarian_ci      | cp1251   |  14 |         | Yes      |       1 |
| cp1251_ukrainian_ci      | cp1251   |  23 |         | Yes      |       1 |
| cp1251_bin               | cp1251   |  50 |         | Yes      |       1 |
| cp1251_general_ci        | cp1251   |  51 | Yes     | Yes      |       1 |
| cp1251_general_cs        | cp1251   |  52 |         | Yes      |       1 |
| cp1256_general_ci        | cp1256   |  57 | Yes     | Yes      |       1 |
| cp1256_bin               | cp1256   |  67 |         | Yes      |       1 |
| cp1257_lithuanian_ci     | cp1257   |  29 |         | Yes      |       1 |
| cp1257_bin               | cp1257   |  58 |         | Yes      |       1 |
| cp1257_general_ci        | cp1257   |  59 | Yes     | Yes      |       1 |
| binary                   | binary   |  63 | Yes     | Yes      |       1 |
| geostd8_general_ci       | geostd8  |  92 | Yes     | Yes      |       1 |
| geostd8_bin              | geostd8  |  93 |         | Yes      |       1 |
| cp932_japanese_ci        | cp932    |  95 | Yes     | Yes      |       1 |
| cp932_bin                | cp932    |  96 |         | Yes      |       1 |
| eucjpms_japanese_ci      | eucjpms  |  97 | Yes     | Yes      |       1 |
| eucjpms_bin              | eucjpms  |  98 |         | Yes      |       1 |
+--------------------------+----------+-----+---------+----------+---------+
129 rows in set (0.00 sec)




```



```
mysql> show create database khacademy;
+-----------+--------------------------------------------------------------------+
| Database  | Create Database                                                    |
+-----------+--------------------------------------------------------------------+
| khacademy | CREATE DATABASE `khacademy` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+-----------+--------------------------------------------------------------------+
1 row in set (0.00 sec)


```



### 인코딩 방식 Default 값 테스트

[root@Linux-04 바탕화면]# vim /etc/my.cnf

```
 1 [mysqld]
  2 datadir=/var/lib/mysql
  3 socket=/var/lib/mysql/mysql.sock
  4 user=mysql
  5 # Disabling symbolic-links is recommended to prevent assorted security risks
  6 symbolic-links=0
  7 
  8 #init_connect=SET collation_connection=utf8_general_ci
  9 #init_connect=SET NAMES utf8
 10 #character-set-server=utf8
 11 #collation-server=utf8_general_ci
 12 
 13 
 14 #[client]
 15 #default-character-set=utf8
 16 
 17 #[mysqldump]
 18 #default-character-set=utf8
 19 
 20 #[mysql]
 21 #default-character-set=utf8
 22 
 23 [mysqld_safe]
 24 log-error=/var/log/mysqld.log
 25 pid-file=/var/run/mysqld/mysqld.pid

```



```
mysql> status;
--------------
mysql  Ver 14.14 Distrib 5.1.73, for redhat-linux-gnu (x86_64) using readline 5.1

Connection id:		2
Current database:	
Current user:		root@localhost
SSL:			Not in use
Current pager:		stdout
Using outfile:		''
Using delimiter:	;
Server version:		5.1.73 Source distribution
Protocol version:	10
Connection:		Localhost via UNIX socket
Server characterset:	latin1
Db     characterset:	latin1
Client characterset:	latin1
Conn.  characterset:	latin1
UNIX socket:		/var/lib/mysql/mysql.sock
Uptime:			12 sec

Threads: 1  Questions: 4  Slow queries: 0  Opens: 15  Flush tables: 1  Open tables: 8  Queries per second avg: 0.333
--------------

mysql> 
mysql> create database kh_db;
Query OK, 1 row affected (0.00 sec)

mysql> show create database kh_db;
+----------+------------------------------------------------------------------+
| Database | Create Database                                                  |
+----------+------------------------------------------------------------------+
| kh_db    | CREATE DATABASE `kh_db` /*!40100 DEFAULT CHARACTER SET latin1 */ |
+----------+------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> drop database kh_db;
Query OK, 0 rows affected (0.01 sec)

mysql> exit
Bye

```



테스트 끝

원상복귀하고 하나 추가

[root@Linux-04 바탕화면]# vim /etc/my.cnf

```
 1 [mysqld]
  2 datadir=/var/lib/mysql
  3 socket=/var/lib/mysql/mysql.sock
  4 user=mysql
  5 # Disabling symbolic-links is recommended to prevent assorted security risks
  6 symbolic-links=0
  7 
  8 skip-character-set-client-handshake=FALSE // 요놈 추가 
  9 
 10 init_connect=SET collation_connection=utf8_general_ci
 11 init_connect=SET NAMES utf8
 12 character-set-server=utf8
 13 collation-server=utf8_general_ci
 14 
 15 
 16 [client]
 17 default-character-set=utf8
 18 
 19 [mysqldump]
 20 default-character-set=utf8
 21 
 22 [mysql]
 23 default-character-set=utf8
 24 
 25 [mysqld_safe]
 26 log-error=/var/log/mysqld.log
 27 pid-file=/var/run/mysqld/mysqld.pid
~                                                                                      
~           
추가한 놈 = 나중에 Web이랑 DB랑 연결시 한글이 안깨짐
```

[root@Linux-04 바탕화면]# service mysqld restart



### 인코딩테스트

[root@Linux-04 바탕화면]# mysql -u root -pkeroro2424.

```
mysql> status;
--------------
mysql  Ver 14.14 Distrib 5.1.73, for redhat-linux-gnu (x86_64) using readline 5.1

Connection id:		2
Current database:	
Current user:		root@localhost
SSL:			Not in use
Current pager:		stdout
Using outfile:		''
Using delimiter:	;
Server version:		5.1.73 Source distribution
Protocol version:	10
Connection:		Localhost via UNIX socket
Server characterset:	utf8
Db     characterset:	utf8
Client characterset:	utf8
Conn.  characterset:	utf8
UNIX socket:		/var/lib/mysql/mysql.sock
Uptime:			36 sec

Threads: 1  Questions: 4  Slow queries: 0  Opens: 15  Flush tables: 1  Open tables: 8  Queries per second avg: 0.111
--------------

mysql> 
mysql> create database entest;
Query OK, 1 row affected (0.00 sec)

mysql> show create database entest;
+----------+-----------------------------------------------------------------+
| Database | Create Database                                                 |
+----------+-----------------------------------------------------------------+
| entest   | CREATE DATABASE `entest` /*!40100 DEFAULT CHARACTER SET utf8 */ |
+----------+-----------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> use entest;
Database changed
mysql> create table entest_tb (no int, name varchar(20));
Query OK, 0 rows affected (0.03 sec)

mysql> show create table entest_tb;
+-----------+--------------------------------------------------------------------------------------------------------------------------------+
| Table     | Create Table                                                                                                                   |
+-----------+--------------------------------------------------------------------------------------------------------------------------------+
| entest_tb | CREATE TABLE `entest_tb` (
  `no` int(11) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8 |
+-----------+--------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)



```

```
mysql> create database entest2
    -> default character set ascii;   // 내가 원하는 대로 기본값 설정 가능
Query OK, 1 row affected (0.00 sec)

mysql> show create database entest2;
+----------+-------------------------------------------------------------------+
| Database | Create Database                                                   |
+----------+-------------------------------------------------------------------+
| entest2  | CREATE DATABASE `entest2` /*!40100 DEFAULT CHARACTER SET ascii */ |
+----------+-------------------------------------------------------------------+
1 row in set (0.00 sec)

얘도 DB 따라서 ascii 가 된다

mysql> use entest2;
Database changed
mysql> create table entest2_tb (no int, name varchar(20));
Query OK, 0 rows affected (0.00 sec)

mysql> show create table entest2_tb;
+------------+----------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table                                                                                                                     |
+------------+----------------------------------------------------------------------------------------------------------------------------------+
| entest2_tb | CREATE TABLE `entest2_tb` (
  `no` int(11) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=ascii |
+------------+----------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)


```

#### 개체에 대한 속성을 수정하고 싶어 (alter)_DB 바꾸기

```
mysql> alter database entest2 default character set euckr;
Query OK, 1 row affected (0.00 sec)

mysql> show create database entest2;
+----------+-------------------------------------------------------------------+
| Database | Create Database                                                   |
+----------+-------------------------------------------------------------------+
| entest2  | CREATE DATABASE `entest2` /*!40100 DEFAULT CHARACTER SET euckr */ |
+----------+-------------------------------------------------------------------+
1 row in set (0.00 sec)

-> 얘 바꾼다고 테이블은 바뀌진 X
본래 테이블은 바뀌지 않아. 앞으로 만들거만 바뀜~!

mysql> show create table entest2_tb;
+------------+----------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table                                                                                                                     |
+------------+----------------------------------------------------------------------------------------------------------------------------------+
| entest2_tb | CREATE TABLE `entest2_tb` (
  `no` int(11) DEFAULT NULL,
  `name` varchar(20) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=ascii |
+------------+----------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

-> 테이블은 여전히 ascii임
새로만들면 euckr로 들어감

mysql> create table entest2_tb2 (no int);
Query OK, 0 rows affected (0.00 sec)

mysql> show create table entest2_tb2;
+-------------+------------------------------------------------------------------------------------------------+
| Table       | Create Table                                                                                   |
+-------------+------------------------------------------------------------------------------------------------+
| entest2_tb2 | CREATE TABLE `entest2_tb2` (
  `no` int(11) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=euckr |
+-------------+------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

```



테이블은 기본적으로 인코딩 방식은 DB 를 따라간다.

#### 하지만 테이블도 따로 인코딩 방식 정할 수 있다!

```
mysql> create table entest2_tb3 (no int) default character set utf8; // 괄호 뒤에 써주면 됨
Query OK, 0 rows affected (0.00 sec)

mysql> show create table entest2_tb3;
+-------------+-----------------------------------------------------------------------------------------------+
| Table       | Create Table                                                                                  |
+-------------+-----------------------------------------------------------------------------------------------+
| entest2_tb3 | CREATE TABLE `entest2_tb3` (
  `no` int(11) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8 |
+-------------+-----------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)


 
```



#### 이미 만들어져 있는 테이블을 바꾸고 싶다면? -> alter 사용!

```
mysql> alter table entest2_tb default character set utf8;
Query OK, 0 rows affected (0.00 sec)
Records: 0  Duplicates: 0  Warnings: 0

mysql> show create table entest2_tb;
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| Table      | Create Table                                                                                                                                        |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
| entest2_tb | CREATE TABLE `entest2_tb` (
  `no` int(11) DEFAULT NULL,
  `name` varchar(20) CHARACTER SET ascii DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=utf8 |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

```



### Convert 

Conver to 잘못 사용하면 문자 다 깨진다...조심해서 사용해야함!!

안전하게 사용하고 싶다면..

- alter table [테이블명] modify [컬럼명] binary(100); 해주고 

  alter table [테이블명] modify varchar(20) collate utf8_general_ci; 해주기

  -> binary로 바꾸면 문자셋 특성이 사라진다. -> 없애고 내가 원하는 거로 바꾸면 문자 손상 방지 가능하기 떄문



100p

```
mysql> show engines;
+------------+---------+------------------------------------------------------------+--------------+------+------------+
| Engine     | Support | Comment                                                    | Transactions | XA   | Savepoints |
+------------+---------+------------------------------------------------------------+--------------+------+------------+
| MRG_MYISAM | YES     | Collection of identical MyISAM tables                      | NO           | NO   | NO         |
| CSV        | YES     | CSV storage engine                                         | NO           | NO   | NO         |
| MyISAM     | DEFAULT | Default engine as of MySQL 3.23 with great performance     | NO           | NO   | NO         |
| InnoDB     | YES     | Supports transactions, row-level locking, and foreign keys | YES          | YES  | YES        |
| MEMORY     | YES     | Hash based, stored in memory, useful for temporary tables  | NO           | NO   | NO         |
+------------+---------+------------------------------------------------------------+--------------+------+------------+
5 rows in set (0.00 sec)


-> InnoDB로 바꾸는게 좋다
```









